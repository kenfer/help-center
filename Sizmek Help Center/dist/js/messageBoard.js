$(document).ready(function(){var e,d,o,p=HelpCenter.user.role,m=window.localStorage,t=JSON.parse(m.getItem("platforms")),i=window.location.href.split("/"),n=i[i.length-1].split("-",1).toString(),a=window.location.href;if(-1<a.indexOf("/articles")&&(a=a.replace("https://support.sizmek.com/hc/en-us/articles/",""),e=parseInt(a),d="",o=[],$.get("/api/v2/help_center/articles/"+e+".json",function(e){for(var t=e.article.label_names,i=0;i<t.length;i++)if(t[i].includes("Type:"))var n=t[i].replace("Type:","");else if(t[i].includes("Status:"))t[i].replace("Status:","");else if(t[i].includes("Severity:"))t[i].replace("Severity:","");else if(t[i].includes("RelatedIncidents:"))var a=t[i].replace(/RelatedIncidents:/g,""),s=a.split(" ");if(void 0!==s&&0<s.length&&""!==s[0]){d+='<div id="related-incidents-container" class="related-article-view"><label id="related-incidents-label">Related Incidents:</label>';for(var l=0;l<s.length;l++)!function(t){$.get("/api/v2/help_center/articles/"+s[t]+".json").done(function(e){o.push(e.article),t+1===s.length&&function(){s.length===o.length?c():setTimeout(arguments.callee,100)}()})}(l);function c(){o.forEach(function(e){360000037612===e.section_id?S="MDX 2.0":202580163===e.section_id?S="Sizmek Advertising Suite":360000037572===e.section_id?S="DSP":360000041291===e.section_id?S="DMP":201265859===e.section_id&&(S="Internal"),d+='<div class="incident-item-action" id="related-incident"><a class="incident-item-view" href="/hc/en-us/articles/'+s[i]+'">'+S+"</a><span>"+s[i]+"</span></div>"}),-1<jQuery.inArray("view_support_content",HelpCenter.user.tags)&&null!=n&&(d+="</div>",$(".main-column .incident-list-cont").append(d))}}})),-1<window.location.href.indexOf("categories/201680143")||-1!==jQuery.inArray(n,t)){$(".section-tree").html("");var u=201680143,r=201822986,h=202580163,b=201265859,v=1627768706,f=357520165,E=["#7EDE96","#3498DB","#FFD24D","#DC7633","#E74C3C"],g=["Operational","Under Maintenance","Degraded Performance","Partial Outage","Major Outage"],w=!1,k=[],T=[],c=[],S="",_=[],I=0,M="";function D(e){return"RESOLVED"===e?'<span class="label label-success" id="category-page-label">'+e+"</span>":"COMPLETED"===e?'<span class="label label-success" id="category-page-label">'+e+"</span>":"INVESTIGATING"===e?'<span class="label label-warning" id="category-page-label">'+e+"</span>":"IDENTIFIED"===e?'<span class="label label-inverse" id="category-page-label">'+e+"</span>":"MONITORING"===e?'<span class="label label-info" id="category-page-label">'+e+"</span>":"NEW"===e?'<span class="label" id="category-page-label">'+e+"</span>":""}if(m.getItem("category")?console.log("Welcome Back"):(m.setItem("category",u),console.log("Welcome To Message Board")),-1<window.location.href.indexOf("categories/"+u)&&$(".sub-nav").after('<img class="component-loader" src="/hc/theme_assets/539845/200023575/spingrey.gif" style="margin-top:85px"/><div class="main-components-container" style="width:1000px"></div>'),history.pushState(null,null,"/hc/en-us/categories/201680143"),window.addEventListener("popstate",function(e){0<window.location.href.indexOf("201680143")&&window.location.assign("https://support.sizmek.com/hc/en-us/categories/201680143-Message-Board")}),$.get("/api/v2/help_center/"+HelpCenter.user.locale+"/categories/"+u+"/sections.json",function(e){for(var t=e.count-1;0<=t;t--){var i=e.sections[t].description;if(-1<i.indexOf("@component")||-1<i.indexOf("@show_content")){var n=e.sections[t].id.toString(),a=e.sections[t].html_url,s=i.split("@",1).toString(),l=e.sections[t].user_segment_id,c=i.charAt(i.length-1),d="";if(T[n]=a,k.push(n),526203==l&&(d='<span class="visibility-internal" data-title="Only visible to agents and managers" style="margin-top: 3px"> <span class="visibility-internal-icon"></span> </span>'),-1<i.indexOf("@show_content")){$(".section-tree").prepend('<section class="section" id="'+s.replace(/\s/g,"_")+'" style="float:unset;max-width:none;width:1000px"><h3 style="margin: 10px 0px;">'+d+'<span class="releaseTag">'+i+'</span><a href="'+a+'" style="font-size:25px !important;font-weight: 300">'+s+'</a></h3><ul class="article-list article-list-'+n+'" style="min-height: 50px;"></ul></section>'),r(n),$(".incident-nav-cont").prepend('<div class="incident-nav-item">'+s+"<span>"+n+"</span></div>"),$(".incident-container").append('<div class="incident-list-cont" id="incident-'+n+'"><div class="incident-list"></div></div>'),$(".subs-nav-cont").prepend('<div class="subs-nav-item">'+s+"<span>"+n+"</span></div>"),$(".subs-container").append('<div class="subs-list-cont" id="subs-'+n+'"> <div class="subs-list-desc">Loading subscribers...</div><div class="subs-list-header"><input type="checkbox"> <div>Email Subscribers</div> <div>Date Added</div> <div>Actions</div></div><div class="subs-lists"></div> </div>');var o='<div class="component"> <input class="affected-component" type="checkbox" value='+n+"><span>"+s+"</span> </div>";-1===i.indexOf("@internal_only")&&$(".component-container").prepend(o)}-1<i.indexOf("@component")&&-1<window.location.href.indexOf("categories/"+u)&&$(".main-components-container").prepend('<div class="component" id="component-'+n+'"style="display:flex;align-items:center;">'+d+'<span class="releaseTag">'+i+'</span><a href="#'+s.replace(/\s/g,"_")+'" style="font-size:17px !important;flex:1;color:#0d2a4d">'+s+'</a><span style="color:'+E[c-1]+';float:right;font-size:17px">'+g[c-1]+'</span><a class="article-subscribe" style="margin-top:0" role="button">Follow</a><span class="hide">'+n+"</span></div>")}0==t&&(m.setItem("platforms",JSON.stringify(k)),W())}function r(r){$.get("/api/v2/help_center/"+HelpCenter.user.locale+"/sections/"+r+"/articles.json",function(e){var t,i;t=i=0;for(var n=0,a=e.articles.length;n<a&&i<5;n++){if(-1==(d=e.articles[n].title).indexOf("[Template]")&&-1==jQuery.inArray("Hidden",e.articles[n].label_names)&&-1==jQuery.inArray("Archived",e.articles[n].label_names)||-1==d.indexOf("[Template]")&&-1==jQuery.inArray("Hidden",e.articles[n].label_names)&&"anonymous"!=p&&"end_user"!=p){if(-1<jQuery.inArray("Archived",e.articles[n].label_names))var s='<span style="display:inherit" class="archived-incident"><b>ARCHIVED</b></span>';else s="";var l=e.articles[n].id,c=new Date(e.articles[n].created_at);if("["===d[0])var d=d.slice(d.indexOf("]")+1,d.length);var o="";$.each(e.articles[n].label_names,function(){-1<this.indexOf("Status")&&(o=this.replace("Status:","").toUpperCase())}),""==s&&(i++,$(".section > .article-list-"+r).append('<li style="display: list-item;padding: 10px 0"><a href="'+l+'">'+s+D(o)+d+"<br><small>Posted on "+c.toDateString()+" "+c.toLocaleTimeString()+'</small><span style="display: none">'+r+"</span></a></li>"),5==i&&5<e.count&&$(".section > .article-list-"+r).append('<div style="margin-top:10px"><a href="'+T[r]+'">View all incidents <span style="font-family:arial">→</span></a></div>')),t++}}0==t&&$(".section > .article-list-"+r).append('<div style="margin-top:10px;font-size: 15px;">No incidents reported.</div>'),$(".section > .article-list").css("height","auto"),$(".main-components-container").css("margin-top","40px")})}}),-1<window.location.href.indexOf("/sections/")){var s=$(".section-description").text(),l=s.split("@",1),C=(s.charAt(s.length-1),$(".section-subscribe .dropdown-toggle").text());if($(".page-header h1 span").html())var O=$(".page-header h1 span").html();else O="";$(".page-header h1").html(O+l),"following"==C.toLowerCase()?$(".section-subscribe .dropdown-toggle").html("Unfollow").css("background-color","#246fdc").css("color","#fff").css("border","1px solid #246fdc"):$(".section-subscribe .dropdown-toggle").html("+ Follow").css("color","#5c5c5c").css("border","solid 1px #979797"),$(".section-subscribe").append('<a class="create-maintenance-modal-btn add-article" rule="button" style="margin-top:1px">ADD MAINTENANCE</a><a class="create-incident-modal-btn add-article" rule="button" style="margin-top:1px">ADD INCIDENT</a>').removeClass("section-subscribe"),$(".article-list > li > a").each(function(){$(this).find("span").each(function(){$(this).hasClass("Hidden-title")||$(this).hasClass("Type:Template-title")||$(this).hasClass("Archived-title")&&("anonymous"==p||"end_user"==p)?$(this).parent().parent().remove():$(this).hasClass("Archived-title")&&"anonymous"!=p&&"end_user"!=p&&$(this).parent().prepend('<span style="display:inherit" class="archived-incident"><b>ARCHIVED</b></span>').css("margin-left","0 !important")})})}if($(".sub-nav .search").css("display","none"),$(".see-all-articles").each(function(){$(this).html('Past Incidents <span style="font-family:arial">→</span>')}),$("main").not(".messageBoard").append('<div class="incident-view-page"></div>'),-1!==jQuery.inArray("view_support_content",HelpCenter.user.tags)){function j(){$("#mInternal .gswitch input").prop("checked")||$("#mExternal .gswitch input").prop("checked")?$("#create-new-scheduled-maintenance").prop("disabled",!1):$("#create-new-scheduled-maintenance").prop("disabled",!0),$("#iInternal .gswitch input").prop("checked")||$("#iExternal .gswitch input").prop("checked")?$("#create-incident-btn").prop("disabled",!1):$("#create-incident-btn").prop("disabled",!0)}$("body").append('<div class="message-board-container"><header class="header"><div class="header-inner clearfix"><div id="goto-status" class="close-MB-admin"><i class="fa fa-times"></i></div><div class="logo"><h2>Message Board Admin</h2></div><nav class="user-nav"><a role="button" id="goto-incidents">Incidents</a><a role="button" id="goto-subscribers">Subscribers</a><a role="button" id="goto-platforms">Platforms</a></nav></div></header></nav><main class="messageBoard"></main>').append('<button id="goto-messageBoard-admin"><svg class="message-board-admin-icon" viewBox="2 2 22 22"><path fill="currentColor" d="M13 16.627a3.625 3.625 0 0 1-3.63-3.622A3.633 3.633 0 0 1 13 9.373a3.633 3.633 0 0 1 3.63 3.632A3.625 3.625 0 0 1 13 16.627m8.295-4.902h-.006a2.116 2.116 0 0 1-1.955-1.307l-.031-.075a2.117 2.117 0 0 1 .459-2.306.693.693 0 0 0 0-.998l-.809-.809a.71.71 0 0 0-.997 0 2.106 2.106 0 0 1-2.295.457l-.08-.033a2.109 2.109 0 0 1-1.302-1.948.705.705 0 0 0-.705-.706h-1.148a.705.705 0 0 0-.705.706c0 .855-.514 1.628-1.306 1.95-.021.009-.043.017-.063.027a2.106 2.106 0 0 1-2.308-.453.72.72 0 0 0-1.006 0l-.81.81a.708.708 0 0 0 0 .997l.007.006a2.11 2.11 0 0 1 .454 2.305c-.01.022-.018.045-.028.066a2.103 2.103 0 0 1-1.95 1.311h-.006a.706.706 0 0 0-.705.706v1.138c0 .39.316.706.705.706h.002a2.1 2.1 0 0 1 1.949 1.306l.029.069a2.11 2.11 0 0 1-.452 2.31l-.004.003a.708.708 0 0 0 0 .998l.809.809a.72.72 0 0 0 1.006 0l.005-.005a2.106 2.106 0 0 1 2.307-.452l.059.024a2.104 2.104 0 0 1 1.306 1.95v.007c0 .395.32.706.705.706h1.148c.385 0 .705-.31.705-.706v-.007c0-.855.514-1.627 1.306-1.95l.059-.024a2.106 2.106 0 0 1 2.307.452l.005.005a.71.71 0 0 0 .997 0l.809-.81a.693.693 0 0 0 0-.997l-.004-.003a2.11 2.11 0 0 1-.452-2.31l.029-.069a2.102 2.102 0 0 1 1.948-1.306h.012a.706.706 0 0 0 .705-.706v-1.138a.706.706 0 0 0-.705-.706"></path></svg>Message Board Admin</button>'),$("main.messageBoard").append('<div class="incident-container"> <div class="incident-navigation"> <div class="incident-nav-header"> <div class="incident-header-title">Incidents</div><a class="create-incident-modal-btn incident-subscribe-button incident-save-button">+ NEW INCIDENT</a><a class="create-maintenance-modal-btn incident-subscribe-button incident-save-button">+ NEW MAINTENANCE</a><a id="new-incident-template" class="incident-subscribe-button incident-save-button">+ INCIDENT TEMPLATE</a><a id="new-maintenance-template" class="incident-subscribe-button incident-save-button">+ Maintenance TEMPLATE</a><input class="incident-nav-search" type="search" placeholder="Search"> </div> <div class="incident-nav-cont"> <div class="incident-nav-item incident-nav-empty">&nbsp; </div> </div>  </div></div><div class="platform-container"> <div class="incident-navigation"><div class="incident-nav-header"> <div class="incident-header-title">Platforms </div> </div> <div class="incident-nav-board"> <a id="create-platform-btn" class="incident-subscribe-button incident-save-button">+ NEW PLATFORM </a></div><div class="incident-list-item" style="border-bottom:2px solid #E0E0E0;width:100%;margin-top: -40px;"><div class="incident-item-body"><h5></h5></div> <div class="incident-item-action" style="flex:3"><h5 style="width:220px"></h5><h5 style="width:220px"></h5><h5 style="flex:1;text-align:center">Show Status</h5><h5 style="flex:1;text-align:center">Show Section</h5><h5 style="flex:1;"></h5></div></div></div> <div class="platform-list-cont"></div></div><div class="subs-container"> <div class="subs-navigation"> <div class="subs-nav-header"> <div class="subs-header-title">Subscribers </div> <input class="subs-nav-search" type="search" placeholder="Search"> </div> <div class="subs-nav-cont"> <div class="subs-nav-item subs-nav-empty">&nbsp; </div> </div> <div class="subs-nav-board"> <input type="email" placeholder="User email" spellcheck="false" id="subs-add-email"> <a id="subs-item-add" class="incident-subscribe-button incident-save-button">Add Subscriber </a></div> </div></div><div class="incident-view-page"></div>'),$("body").append('<div class="modal" id="new-scheduled-maintenance-modal"> <div class="modal-content"> <div class="modal-header"><button class="close close-modal">X</button><h1>New Scheduled Maintenance</h1><div class="select-template"><select class="select-picker select-template-dropdown" name="Select Template"><option value="none">Use Template</option></select></div></div><div class="modal-body"> <div class="modal-body-detail components-affected"> <label>Components Affected</label> <div class="component-container"> </div></div> <h1 style="font-size: 20px;font-weight: 400;">Messaging</h1><br><div class="modal-body-detail maintenance-name"> <label>Title</label><input id="maintenance-name" name="" placeholder="Maintenance Title" type="text" required> </div><div class="modal-body-detail maintenance-details"> <div style="padding: 20px;border: 1px solid #ababab;border-radius: 5px;background-color: #fffdf6;" id="mInternal"><label class="gswitch"><input type="checkbox" id="mInternalMessage"><span class="gslider round"></span></label><label style="margin-bottom: 30px;font-size:18px">Internal Message</label> <div style="clear: both; display: block;margin-bottom:30px">Send e-mail to subscribers<label class="gswitch"><input type="checkbox" id="mEmailSubscribers"><span class="gslider round green"></span></label></div> <textarea placeholder="Message" id="mMessage"></textarea> </div><br><div style="padding: 20px;border: 1px solid #ababab;border-radius: 5px;background-color: #F5FDFE;" id="mExternal"><label class="gswitch"><input type="checkbox" id="mExternalMessage"><span class="gslider round"></span></label><label style="margin-bottom: 30px;font-size:18px">External Message <span style="font-size: 0.7em;vertical-align: middle;font-weight: 400;">| <span class="copyText" style="color:#2E64F8;">Copy from Internal Message</span></span></label> <div style="clear: both; display: none" id="showHome">Show in SAS homepage<label class="gswitch"><input type="checkbox" id="mExShowHomepage"><span class="gslider round green"></span></label></div> <div  style="clear: both; display: block; margin-bottom:30px">Send e-mail to subscribers<label class="gswitch"><input type="checkbox" id="mExEmailSubscribers"><span class="gslider round green"></span></label></div> <textarea placeholder="Message" id="mExMessage"></textarea> </div> </div><div class="maintenance-start"> <label>Maintenance Start Time</label> <div class="maintenance-time"> <input name="" type="date" required> <select class="time-select"></select> </div><span class="info">All times must be specified in EST - Eastern Standard Time(US & Canada)</span> </div><div class="maintenance-end"> <label>Maintenance End Time</label> <div class="maintenance-time"> <input name="" type="date" required> <select class="time-select"></select> </div><span class="info">All times must be specified in EST - Eastern Standard Time(US & Canada)</span> </div></div><div class="modal-footer"><button class="btn btn-primary" id="create-new-scheduled-maintenance">CREATE MAINTENANCE</button></div></div></div>'),$("body").append('<div class="modal" id="create-incident-modal"> <div class="modal-content"> <div class="modal-header"><button class="close close-modal">X</button><h1>Create an Incident</h1><div class="select-template"><select class="select-picker select-template-dropdown" name="Select Template"> <option class="template" value="none">Use Template</option> </select> </div></div><div class="modal-body"> <div class="modal-body-detail components-affected"> <label>Components Affected</label> <div class="component-container"> </div></div><h1 style="font-size: 20px;font-weight: 400;">Messaging</h1><br><div class="modal-body-detail incident-name"> <label>Title</label> <br><input type="text" id="incident-name" name="" placeholder="Incident Title"><span class="info"></span> </div><div class="modal-body-detail incident-severity"><label>Severity</label><br><select><option value="1">Operational</option><option value="3">Degraded Performance</option><option value="4">Minor Outage</option><option value="5">Major Outage</option></select></div><div class="modal-body-detail incident-status"> <label>Status</label> <div class="status-choices"> <input type="radio" name="iInvestigating" value="Investigating"><span class="radio-label">Investigating</span> <input type="radio" name="iIdentified" value="Identified"><span class="radio-label">Identified</span> <input type="radio" name="iMonitoring" value="Monitoring"><span class="radio-label">Monitoring</span> <input type="radio" name="iResolved" value="Resolved"><span class="radio-label">Resolved</span> </div></div><div class="modal-body-detail incident-message"> <div style="padding: 20px;border: 1px solid #ababab;border-radius: 5px;background-color: #fffdf6;" id="iInternal"><label class="gswitch"><input type="checkbox" id="iInternalMessage"><span class="gslider round"></span></label><label style="margin-bottom: 30px;font-size:18px">Internal Message</label> <div style="clear: both; display: block;margin-bottom:30px">Send e-mail to subscribers<label class="gswitch"><input type="checkbox" id="iEmailSubscribers"><span class="gslider round green"></span></label></div> <textarea placeholder="Message" id="iMessage"></textarea> </div><br><div style="padding: 20px;border: 1px solid #ababab;border-radius: 5px;background-color: #F5FDFE;" id="iExternal"><label class="gswitch"><input type="checkbox" id="iExternalMessage"><span class="gslider round"></span></label><label style="margin-bottom: 30px;font-size:18px">External Message <span style="font-size: 0.7em;vertical-align: middle;font-weight: 400;">| <span class="copyText" style="color:#2E64F8;">Copy from Internal Message</span></span></label> <div style="clear: both; display: none" id="showHome">Show in SAS homepage<label class="gswitch"><input type="checkbox" id="iExShowHomepage"><span class="gslider round green"></span></label></div> <div  style="clear: both; display: block; margin-bottom:30px">Send e-mail to subscribers<label class="gswitch"><input type="checkbox" id="iExEmailSubscribers"><span class="gslider round green"></span></label></div> <textarea placeholder="Message" id="iExMessage"></textarea> </div></div></div><div class="modal-footer"><button class="btn btn-primary" id="create-incident-btn">CREATE INCIDENT</button></div></div></div>'),$("body").append('<div class="modal" id="new-incident-template-modal"> <div class="modal-content"> <div class="modal-header"><button class="close close-modal">X</button><h1>Incident Template</h1><div class="select-template"><select class="select-picker update-template-dropdown" name="Select Template"><option class="template" value="none">Update Template</option> </select> </div></div> <div class="modal-body"> <div class="modal-body-detail template-name"><label>Template Name</label><br><input type="text" placeholder="Template Name"><span class="info">This is used internally so you can identify which template you are using.</span></div><div class="modal-body-detail incident-title"> <label>Incident Title </label> <br> <input type="text" placeholder="Incident Title"><span class="info">The title given to the incident or scheduled maintenance. This is only applied when creating an incident or scheduled maintenance.</span></div><div class="modal-body-detail incident-status"> <label>Incident Status</label><br><select> <option value="Investigating">Investigating</option> <option value="Identified">Identified</option> <option value="Monitoring">Monitoring</option> <option value="Resolved">Resolved</option> </select><span class="info">The status will be applied to the incident or scheduled maintenance.</span></div><div class="modal-body-detail incident-severity"><label>Incident Severity</label><br><select><option value="1">Operational</option><option value="3">Degraded Performance</option><option value="4">Minor Outage</option><option value="5">Major Outage</option></select><span class="info">The severity will be applied to the incident or scheduled maintenance.</span></div><div class="modal-body-detail incident-message"> <label>Message Body </label> <br> <textarea placeholder="Message" style="margin-top: 0px; margin-bottom: 0px; height: 80px;"> </textarea> </div> <div class="modal-body-detail components-affected"> <label>Alert Users Subscribed To: </label> <div class="component-container"></div> </div></div><div class="modal-footer"><button class="btn btn-primary delete-template-btn">DELETE TEMPLATE</button><button class="btn btn-primary" id="update-incident-template-btn">UPDATE TEMPLATE</button><button class="btn btn-primary" id="create-incident-template-btn">CREATE INCIDENT TEMPLATE</button></div> </div></div>'),$("body").append('<div class="modal" id="new-maintenance-template-modal"> <div class="modal-content"> <div class="modal-header"> <button class="close close-modal">X </button> <h1>Maintenance Template</h1><div class="select-template"><select class="select-picker update-template-dropdown" name="Select Template"> <option class="template" value="none">Update Template</option> </select> </div></div> <div class="modal-body"> <div class="modal-body-detail template-name"> <label>Template Name </label> <br> <input type="text" placeholder="Template Name"> <span class="info">This is used internally so you can identify which template you are using. </span> </div> <div class="modal-body-detail maintenance-title"> <label>Maintenance Title </label> <br> <input type="text" placeholder="Maintenance Title"> <span class="info">The title given to the incident or scheduled maintenance. This is only applied when creating an incident or scheduled maintenance. </span> </div> <div class="modal-body-detail maintenance-message"> <label>Message Body </label> <br> <textarea placeholder="Message" style="margin-top: 0px; margin-bottom: 0px; height: 80px;"> </textarea> </div> <div class="modal-body-detail components-affected"> <label>Alert Users Subscribed To: </label> <div class="component-container"> </div> </div> </div> <div class="modal-footer"><button class="btn btn-primary delete-template-btn">DELETE TEMPLATE</button><button class="btn btn-primary" id="update-maintenance-template-btn">UPDATE TEMPLATE</button><button class="btn btn-primary" id="create-maintenance-template-btn">CREATE MAINTENANCE TEMPLATE </button> </div> </div></div>'),$("textarea").ckeditor(),$(".create-maintenance-modal-btn").click(function(){R(),$("html").css("overflow","hidden"),$("#new-scheduled-maintenance-modal").fadeIn("fast"),setTimeout(function(){CKEDITOR.instances.mMessage.plugins.lite.findPlugin(CKEDITOR.instances.mMessage).toggleTracking(!1,!1),CKEDITOR.instances.mExMessage.plugins.lite.findPlugin(CKEDITOR.instances.mExMessage).toggleTracking(!1,!1)},300),$(".gswitch input").prop("checked",!0),$("#mExShowHomepage").prop("checked",!1),$("#mInternal > div").fadeIn(),$("#mExternal > div").fadeIn(),$("#mExternal > #showHome").hide()}),$(".create-incident-modal-btn").click(function(){R(),$("html").css("overflow","hidden"),$("#create-incident-modal").fadeIn("fast"),setTimeout(function(){CKEDITOR.instances.iMessage.plugins.lite.findPlugin(CKEDITOR.instances.iMessage).toggleTracking(!1,!1),CKEDITOR.instances.iExMessage.plugins.lite.findPlugin(CKEDITOR.instances.iExMessage).toggleTracking(!1,!1)},300),$(".gswitch input").prop("checked",!0),$("#iExShowHomepage").prop("checked",!1),$("#iInternal > div").fadeIn(),$("#iExternal > div").fadeIn(),$("#showHome").hide()}),$("#iInternalMessage").click(function(){$("#iInternal .gswitch input").prop("checked")?($("#iSubscribeGN, #iEmailSubscribers").prop("checked",!0),$("#iInternal > div").fadeIn()):($("#iSubscribeGN, #iEmailSubscribers").prop("checked",!1),$("#iInternal > div").fadeOut()),j()}),$("#iExternalMessage").click(function(){$("#iExternal .gswitch input").prop("checked")?($("#iExSubscribeGN, #iExEmailSubscribers").prop("checked",!0),$("#iExternal > div").fadeIn()):($("#iExSubscribeGN, #iExEmailSubscribers").prop("checked",!1),$("#iExternal > div").fadeOut()),j()}),$("#mInternalMessage").click(function(){$("#mInternal .gswitch input").prop("checked")?($("#mSubscribeGN, #mEmailSubscribers").prop("checked",!0),$("#mInternal > div").fadeIn()):($("#mSubscribeGN, #mEmailSubscribers").prop("checked",!1),$("#mInternal > div").fadeOut()),j()}),$("#mExternalMessage").click(function(){$("#mExternal .gswitch input").prop("checked")?($("#mExSubscribeGN, #mExEmailSubscribers").prop("checked",!0),$("#mExternal > div").fadeIn()):($("#mExSubscribeGN, #mExEmailSubscribers").prop("checked",!1),$("#mExternal > div").fadeOut()),j()}),$('.incident-status input[type="radio"]').change(function(){$('.incident-status input[type="radio"]').each(function(){$(this).prop("checked",!1)}),$(this).prop("checked",!0)}),$(".close-modal").click(function(){if($(this).closest(".modal").fadeOut("fast"),$(".modal-footer #related-incidents-container").remove(),$(".incident-container").is(":visible"))return!1;$("html").css("overflow","auto")});var A=[];function P(){$.get("/api/v2/help_center/en-us/articles.json?label_names=Type:Template",function(e){for($(".select-template-dropdown").each(function(){$(this).find("option:not(:first)").remove()}),$(".update-template-dropdown").each(function(){$(this).find("option:not(:first)").remove()}),$(".select-template-dropdown,.update-template-dropdown").addClass("select-picker"),A=[],x=0;x<e.count;x++){var t=e.articles[x].title,i=e.articles[x].label_names[1];if(1==t.includes("[Template]"))t=t.replace("[Template]","");var n=e.articles[x].id;if("For:Incident"==i){var a="<option value='"+n+"'>"+t+"</option>";$("#create-incident-modal .select-template-dropdown, #new-incident-template-modal .update-template-dropdown").append(a)}else{a="<option value='"+n+"'>"+t+"</option>";$("#new-scheduled-maintenance-modal .select-template-dropdown, #new-maintenance-template-modal .update-template-dropdown").append(a)}var s=e.articles[x].body.split("::::"),l=s[4].split(",");for(template=[],template.template_name=t,template.incident_name=s[0],template.incident_status=s[1],template.incident_severity=s[2],template.incident_message=s[3],template.incident_componentsAffected=[],y=0;y<l.length;y++)""!=l[y]&&template.incident_componentsAffected.push(l[y]);template.id=n,A[n]=template}J()})}function N(){$("select.time-select").each(function(){if(""==$(this).text())for(x=1;x<=24;x++){var e=x;x<10&&(e="0"+x);var t="<option>"+e+":00</option>";$(this).append(t)}})}function R(){$(".modal").find("input[type='checkbox']").attr("checked",!1).trigger("change"),$(".modal").find("input[type='radio']").attr("checked",!1),$(".modal").find("input[type='text']").val(""),$(".modal").find("textarea").val(""),$(".delete-template-btn,#update-incident-template-btn,#update-maintenance-template-btn").hide(),$("#create-maintenance-template-btn,#create-incident-template-btn").show()}function U(i,e,a){"undefined"!=e.globalnotif&&1==e.globalnotif&&$.ajax({url:"/api/v2/help_center/sections/"+i+"/subscriptions.json",type:"POST",data:{subscription:{source_locale:"en-us",include_comments:!0,user_id:v}}});var t={},n={};if("undefined"!=e.sas_visibility&&0==e.sas_visibility&&i==h)var s=["Type:Incident","Status:"+e.incidentStatus,"Name:"+e.incidentName,"Severity:"+e.incidentSeverity,"Hidden"];else if("undefined"!=e.sas_visibility&&1==e.sas_visibility&&i==h)s=["Type:Incident","Status:"+e.incidentStatus,"Name:"+e.incidentName,"Severity:"+e.incidentSeverity,"ShowInHomepage"];else s=["Type:Incident","Status:"+e.incidentStatus,"Name:"+e.incidentName,"Severity:"+e.incidentSeverity];var l="["+e.incidentStatus+"] "+e.incidentName;n.title=l,n.body=e.message,n.author_id=f,t.article=n,t.article.label_names=s,t.notify_subscribers=e.notifications,$.ajax({url:"/api/v2/help_center/sections/"+i+"/articles.json",method:"POST",data:JSON.stringify(t),contentType:"application/json"}).done(function(e){$("#incident-"+i+" .incident-list").html(""),c.push(e.article.id);var n=[];if(a){for(var t=0;t<c.length;t++)!function(t){var e=c.filter(function(e){return e!=c[t]});if(e.length){var i=$.ajax({url:"/api/v2/help_center/articles/"+c[t]+"/labels.json",type:"POST",data:{label:{name:"RelatedIncidents: "+e.join(", ")}}});n.push(i)}}(t);$.when.apply(null,n).done(function(){$(".btn").removeAttr("disabled"),$("#create-incident-modal").fadeOut("fast"),F(i)})}}),w=!0}function z(t,e,i){console.log("creating maintenance in ",t,e,i),"undefined"!=e.globalnotif&&1==e.globalnotif&&t==b&&$.ajax({url:"/api/v2/help_center/sections/"+t+"/subscriptions.json",type:"POST",data:{subscription:{source_locale:"en-us",include_comments:!0,user_id:v}}});var n=new Object,a=new Object;if("undefined"!=e.sas_visibility&&0==e.sas_visibility&&t==h)var s=["Type:Maintenance","Status:New","Name:"+e.maintenanceName,"Hidden"];else if("undefined"!=e.sas_visibility&&1==e.sas_visibility&&t==h)s=["Type:Maintenance","Status:New","Name:"+e.maintenanceName,"ShowInHomepage"];else s=["Type:Maintenance","Status:New","Name:"+e.maintenanceName];var l="Maintenance Start: "+e.startTime.date+" "+e.startTime.time+" ",c="Maintenance End: "+e.endTime.date+" "+e.endTime.time+" ";a.title=e.maintenanceName+"  "+e.startTime.date,a.body="<strong>"+l+"</strong><br><strong>"+c+"</strong><br><br>"+e.maintenanceDetails,a.author_id=f,n.article=a,n.notify_subscribers=e.notifications,n.article.label_names=s;var d=JSON.stringify(n);setTimeout(function(){$.ajax({url:"/api/v2/help_center/sections/"+t+"/articles.json",method:"POST",data:d,contentType:"application/json",error:function(e){console.log("error")},success:function(e){i&&($(".btn").removeAttr("disabled"),$("#new-scheduled-maintenance-modal").fadeOut("fast"),$("#incident-"+t+" .incident-list").html(""),F(t))}})},500),w=!0}function H(){$("#back-incident-list").click(),$(".message-board-container").css("left","100%"),$("html").css("overflow","auto"),$(".messageBoard > div").fadeOut("slow"),$(".modal-backdrop").remove(),$(".wrapper").css("filter","none"),$(".incident-nav-item").removeClass("incident-nav-item-active"),w&&location.reload()}function F(v){$("#incident-"+v+" .incident-list").html(""),$.get("/api/v2/help_center/sections/"+v+"/articles.json",function(e){_=$.merge(_,e.articles),0;for(var t=e.articles.length,i="",n=0;n<t;n++){for(var a=e.articles[n].label_names,s="",l="Archive",c="activate",d="",o="",r=0;r<a.length;r++)a[r].includes("Type:")&&(s=a[r].replace("Type:","")),"Archived"==a[r]&&(l="Unarchive",c="activated"),"Hidden"==a[r]?(d="Show",o="activate"):"ShowInHomepage"==a[r]&&(d="Hide",o="activated"),a[r].includes("Status:")&&(i=a[r].replace("Status:","").toUpperCase());if("Template"!=s&&""!=s){var p=e.articles[n].id,m=e.articles[n].title,u=(e.articles[n].html_url,e.articles[n].created_at),b=new Date(u);if("["===m[0]&&(m=m.slice(m.indexOf("]")+1,m.length)),""!=d)d='</a><a class="incident-item-hide '+o+'">'+d+"</a>";v==h?$("#incident-"+v+" .incident-list").append('<div class="incident-list-item"><div class="incident-item-body"><h5>'+D(i)+m+"</h5><small>Posted on "+b.toDateString()+" "+b.toLocaleTimeString()+'</small></div><div class="incident-item-action"><a class="incident-item-view">View '+s+"</a>"+d+'<a class="incident-item-delete" id="incident-subscribe-button">Delete</a><a class="incident-subscribe-button" id="update-'+s.toLowerCase()+'-btn">Update<span class="hide">'+p+'</span><span id="platform_id style="display:none;">'+v+"</span></a></div></div>"):$("#incident-"+v+" .incident-list").append('<div class="incident-list-item"><div class="incident-item-body"><h5>'+D(i)+m+"</h5><small>Posted on "+b.toDateString()+" "+b.toLocaleTimeString()+'</small></div><div class="incident-item-action"><a class="incident-item-view">View '+s+"</a>"+d+'<a class="incident-item-archive '+c+'">'+l+'</a><a class="incident-subscribe-button" id="incident-item-delete">Delete</a><a class="incident-subscribe-button" id="update-'+s.toLowerCase()+'-btn">Update<span class="hide">'+p+'</span><span id="platform_id" style="display:none;">'+v+"</span></a></div></div>")}}$("#incident-"+v).find(".incident-list-item").paginate(20)})}P(),$(".select-template-dropdown").change(function(){if("none"!=$(this).val()){var e=$(this).val();for($(".incident-message textarea, .maintenance-details textarea").val(A[e].incident_message),$("#incident-name, #maintenance-name").val(A[e].incident_name),x=0;x<A[e].incident_componentsAffected.length;x++)$(this).parent().parent().parent().find("input[value='"+A[e].incident_componentsAffected[x]+"']").click();$(".incident-severity select").val(A[e].incident_severity);var t="i"+A[e].incident_status;$("input[name='"+t+"']").prop("checked",!0)}else R(),$(".gswitch input").prop("checked",!0),$("#iExShowHomepage").prop("checked",!1)}),$(".update-template-dropdown").change(function(){if("none"!=$(this).val()){$(".delete-template-btn,#update-incident-template-btn,#update-maintenance-template-btn").show(),$("#create-maintenance-template-btn,#create-incident-template-btn").hide();var e=$(this).val();for($(".template-name input[type='text']").val(A[e].template_name),$(".incident-message textarea, .maintenance-message textarea").val(A[e].incident_message),$(".incident-title input[type='text'], .maintenance-title input[type='text']").val(A[e].incident_name),$("#new-incident-template-modal .incident-status select").val(A[e].incident_status),$(".incident-severity select").val(A[e].incident_severity),x=0;x<A[e].incident_componentsAffected.length;x++)$("input[value='"+A[e].incident_componentsAffected[x]+"']").prop("checked",!0);var t="i"+A[e].incident_status;$("input[name='"+t+"']").prop("checked",!0)}else R()}),N(),function(){var e=new Date,t=e.getMonth()+1,i=e.getDate(),n=e.getFullYear();t<10&&(t="0"+t.toString());i<10&&(i="0"+i.toString());var a=n+"-"+t+"-"+i;$("input[type='date']").attr("min",a),$("input[type='date']").val(a)}(),$("body").on("change","#create-incident-modal .component input[value='"+b+"'],#new-scheduled-maintenance-modal .component input[value='"+b+"']",function(){$(this).is(":checked")?$("#create-incident-modal .components-affected, #new-scheduled-maintenance-modal .components-affected").after('<div class="modal-body-detail global-notifications"><label>Global Notifications</label><br><input type="checkbox" checked class="subscribe-global-notif"><span class="checkbox-label">Subscribe globalnotifications@sizmek.com.</span></div>'):$(".global-notifications").remove()}),$("body").on("change","#create-incident-modal .component input[value='"+h+"'], #new-scheduled-maintenance-modal .component input[value='"+h+"']",function(){if("create-incident-modal"==$(this).closest(".modal").attr("id"))var e="Incident";else e="Maintenance";$(this).is(":checked")?"Incident"==e?($("#showHome").show(),$("#iExShowHomepage").prop("checked",!0)):($("#showHome").show(),$("#mExShowHomepage").prop("checked",!0)):"Incident"==e?($("#showHome").hide(),$("#iExShowHomepage").prop("checked",!1)):($("#showHome").hide(),$("#mExShowHomepage").prop("checked",!1))}),$(".copyText").click(function(){$("#iExMessage").val($("#iMessage").val()),$("#mExMessage").val($("#mMessage").val())}),$("#create-incident-btn").click(function(){$(this).attr("disabled",!0);var e=$(this).closest(".modal"),t=[],i=e.find('.components-affected input[type="checkbox"]:checked').length;if(t.incidentName=e.find("#incident-name").val(),t.incidentStatus=e.find('.incident-status input[type="radio"]:checked').val(),t.incidentSeverity=e.find(".incident-severity select").val(),t.globalnotif=!0,""==t.incidentName||null==t.incidentStatus||null==e.find('.components-affected input[type="checkbox"]:checked').val())$(this).removeAttr("disabled"),alert("Please fill up all the fields.");else if($("#iInternal .gswitch input").prop("checked")&&""==$("#iInternal textarea").val()||$("#iExternal .gswitch input").prop("checked")&&""==$("#iExternal textarea").val())$(this).removeAttr("disabled"),alert("Internal or External message is enabled but empty.\nPlease disable it or add the message.");else{if($("#iInternal .gswitch input").prop("checked")){var n="";e.find('.components-affected input[type="checkbox"]:checked').siblings("span").each(function(){n=n+"["+$(this).text().trim()+"]"}),n=n+" "+e.find("#incident-name").val(),setTimeout(function(){t.incidentName=n,t.message=$("#iInternal textarea").val(),t.notifications=$("#iEmailSubscribers").prop("checked"),U(b,t,!0)},1500*i)}if($("#iExternal .gswitch input").prop("checked")){t.message=$("#iExternal textarea").val(),t.notifications=$("#iExEmailSubscribers").prop("checked"),t.sas_visibility=$("#iExShowHomepage").prop("checked");var a=0;e.find('.components-affected input[type="checkbox"]:checked').each(function(){a++,U($(this).val(),t,a===i&&!$("#iInternal .gswitch input").prop("checked"))})}}}),$("#create-new-scheduled-maintenance").click(function(){$(this).attr("disabled",!0);var e=$(this).closest(".modal"),t=[],i=e.find('.components-affected input[type="checkbox"]:checked').length;if(t.maintenanceName=e.find("#maintenance-name").val(),t.startTime=[],t.startTime.date=e.find(".maintenance-start input[type='date']").val(),t.startTime.time=e.find(".maintenance-start .time-select").val(),t.endTime=[],t.endTime.date=e.find(".maintenance-end input[type='date']").val(),t.endTime.time=e.find(".maintenance-end .time-select").val(),t.globalnotif=!0,""==t.maintenanceName||null==e.find('.components-affected input[type="checkbox"]:checked').val())$(this).removeAttr("disabled"),alert("Please fill up all the fields.");else if($("#mInternal .gswitch input").prop("checked")&&""==$("#mInternal textarea").val()||$("#mExternal .gswitch input").prop("checked")&&""==$("#mExternal textarea").val())$(this).removeAttr("disabled"),alert("Internal or External message is enabled but empty.\nPlease disable it or add the message.");else{if($("#mInternal .gswitch input").prop("checked")){var n="";e.find('.components-affected input[type="checkbox"]:checked').siblings("span").each(function(){n=n+"["+$(this).text().trim()+"]"}),n=n+" "+e.find("#maintenance-name").val(),setTimeout(function(){t.maintenanceName=n,t.maintenanceDetails=$("#mInternal textarea").val(),t.notifications=$("#mEmailSubscribers").prop("checked"),z(b,t,!0)},1500*i)}if($("#mExternal .gswitch input").prop("checked")){t.maintenanceDetails=$("#mExternal textarea").val(),t.notifications=$("#mExEmailSubscribers").prop("checked"),t.sas_visibility=$("#mExShowHomepage").prop("checked");var a=0;e.find('.components-affected input[type="checkbox"]:checked').each(function(){a++,z($(this).val(),t,a===i&&!$("#mInternal .gswitch input").prop("checked"))})}}}),$(".delete-template-btn").on("click",function(){if(confirm("Delete this template?")){var e=$(this).parent().parent().find("select.update-template-dropdown").val();$.ajax({url:"/api/v2/help_center/articles/"+e+".json",type:"DELETE",success:function(){setTimeout(function(){P()},2e3)}}),$(".close-modal").click()}}),$(".incident-nav-cont").on("click",".incident-nav-item:not(:last-child)",function(e){var t=$(this).children("span").text();F(t),$(".incident-list-cont").hide(),$("#incident-"+t).show(),$(".incident-nav-item").removeClass("incident-nav-item-active"),$(this).addClass("incident-nav-item-active")}),$("#goto-incidents").on("click",function(){$("main.messageBoard").children("div").not(".container-divider").hide(),$(".incident-container").show(),$(".incident-nav-item").first().click(),$(".message-board-container nav.user-nav a").removeClass("active"),$(this).addClass("active")}),$("#goto-platforms").on("click",function(){""==$(".platform-list-cont").text()&&B(m.getItem("category"));$("main.messageBoard").children("div").not(".container-divider").hide(),$(".platform-container").show(),$(".message-board-container nav.user-nav a").removeClass("active"),$(this).addClass("active")}),$("#goto-subscribers").on("click",function(){$("main.messageBoard").children("div").not(".container-divider").hide(),$(".subs-container").show(),$(".message-board-container nav.user-nav a").removeClass("active"),$(this).addClass("active")}),$("#goto-status, .message-board-container .logo").on("click",function(e){e.preventDefault(),H()}),$(document).keydown(function(e){27==e.keyCode&&H()}),$("#goto-messageBoard-admin").on("click",function(){$("#back-incident-list").click(),$(".message-board-container").css("left","20%"),$("html").css("overflow","hidden"),$("#goto-incidents").click(),$("body").append('<div class="modal-backdrop fade in" style="background:rgba(0,0,0,0.4);z-index:1"></div>'),$(".wrapper").css("filter","blur(2px)")}),$("#hide_incidents").on("click",function(){$(".incident-container").hide(),$(".container").show()}),$("#create-platform-btn").on("click",function(e){$("body").append('<div class="modal" id="create-platform-modal"> <div class="modal-content"> <div class="modal-header"><button class="close close-modal">X</button><h1>Create New Platform </h1></div> <div class="modal-body"><div class="modal-body-detail platform-name"><label>Platform Name</label><br><input type="text" placeholder="Platform Name"> <span class="info"> </span> </div> <div class="modal-body-detail platform-display-name"><label>Display Name</label><br><input type="text" placeholder="Display Name"><span class="info"></span></div><div class="modal-body-detail platform-user-segment"><label>User Segment</label><br><select><option value="">Visible to everyone</option><option value="526223">Signed-in users</option><option value="526203">Agents and managers</option></select><span class="info">User segments are groups of users who can view content in your Status Page.</span></div></div><div class="modal-footer"><button class="btn btn-primary" id="create-new-platform">CREATE PLATFORM </button></div></div></div>'),$("#create-platform-modal").fadeIn("fast")}),$(".incident-container").on("click",".incident-item-delete, #incident-item-delete",function(e){if(confirm("Delete this incident?")){var t=$(this).parent().find(".hide").text();$.ajax({url:"/api/v2/help_center/articles/"+t+".json",type:"DELETE"}),$(this).closest(".incident-list-item").remove(),w=!0}}),$(".incident-container").on("click",".incident-item-archive",function(e){var i=$(this).closest("div").find("span.hide").text();"Archive"==$(this).text()?($.ajax({url:"/api/v2/help_center/articles/"+i+"/labels.json",type:"POST",data:{label:{name:"Archived"}}}),$(this).html("Unarchive").removeClass("activate").addClass("activated")):($.get("/api/v2/help_center/articles/"+i+"/labels.json",function(e){for(var t=0;t<e.labels.length;t++)"Archived"==e.labels[t].name&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels/"+e.labels[t].id+".json",type:"DELETE"})}),$(this).html("Archive").removeClass("activated").addClass("activate")),w=!0}),$(".incident-container").on("click",".incident-item-hide",function(e){var i=$(this).closest("div").find("span.hide").text();"Hide"==$(this).text()?($.get("/api/v2/help_center/articles/"+i+"/labels.json",function(e){for(var t=0;t<e.labels.length;t++)"ShowInHomepage"==e.labels[t].name&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels/"+e.labels[t].id+".json",type:"DELETE"})}),$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels.json",type:"POST",data:{label:{name:"Hidden"}}}),$(this).html("Show").removeClass("activated").addClass("activate")):($.get("/api/v2/help_center/articles/"+i+"/labels.json",function(e){for(var t=0;t<e.labels.length;t++)"Hidden"==e.labels[t].name&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels/"+e.labels[t].id+".json",type:"DELETE"})}),$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels.json",type:"POST",data:{label:{name:"ShowInHomepage"}}}),$(this).html("Hide").removeClass("activate").addClass("activated")),w=!0}),$(".incident-view-page").on("click","#delete-incident-btn",function(e){if(confirm("Delete this incident?")){var t=$(this).find("span.hide").text();if($.ajax({url:"/api/v2/help_center/articles/"+t+".json",type:"DELETE"}),$(".messageBoard .incident-view-page").is(":visible")){$(".incident-view-page").html("").hide(),$(".incident-container").show();var i=$(".incident-nav-item-active").children("span").text();setTimeout(function(){$("#incident-"+i+" .incident-list").html(""),F(i)},1e3),w=!0}else setTimeout(function(){location.reload()},500)}}),$(".incident-container, .incident-view-page").on("click",".incident-item-view",function(e){$(this).css("cursor","progress"),$(this).attr("disabled","disabled"),q($(this).parent().find(".hide").text())}),$(".incident-view-page").on("click","#update-incident-btn",function(e){"201265859"===$(".incident-nav-item.incident-nav-item-active span").text()?$("#updateMessage").css("background-color","#FFFDF6"):"201265859"===$("a.active span").text()&&$("#updateMessage").css("background-color","#FFFDF6")}),$(".incident-view-page, .incident-container").on("click","#update-incident-btn",function(e){$(this).attr("disabled","disabled");var t=$(this).children(".hide").text(),i=$(this).children("#platform_id").text(),d="",o="",r=[];function p(e){$("body").append('<div class="modal" id="update-incident-modal"><div class="modal-content"><div class="modal-header"><button class="close close-modal">X</button><h1>Update Incident Status</h1></div> <div class="modal-body"> <div class="modal-body-detail"><label>Incident Status</label> <div class="status-choices"> <input type="radio" id="sc1" name="status-choices" value="Investigating"> <label class="radio-label" for="sc1">Investigating</label> <input type="radio" id="sc2" name="status-choices" value="Identified"><label class="radio-label" for="sc2">Identified </label> <input type="radio" id="sc3" name="status-choices" value="Monitoring"> <label class="radio-label" for="sc3">Monitoring</label> <input type="radio" id="sc4" name="status-choices" value="Resolved"> <label class="radio-label" for="sc4">Resolved </label> </div> </div><div class="modal-body-detail incident-severity"><label>Incident Severity</label><br><select><option value="1">Operational</option><option value="3">Degraded Performance</option><option value="4">Minor Outage</option><option value="5">Major Outage</option></select></div><div id="update-internal-message" class="modal-body-detail" style="padding: 20px;border: 1px solid #ababab;border-radius: 5px; background-color:#fffdf6;"> <label style="margin-bottom: 10px;font-size:18px;">Internal Message </label><label class="gswitch" id="switch-internal"><input type="checkbox" id="internal-message-switch"><span class="gslider round"></span></label><div class="modalOptions" style="clear: both; display: block;margin-bottom:30px">Send alert to subscribers<label class="gswitch"><input type="checkbox" id="send-comment-notif"><span class="gslider round green"></span></label></div><textarea id="update-incident-body-internal" class="message-internal" placeholder="Message"></textarea> </div><div class="components-affected-update"></div><div id="no-internal-incident"class="modal-body-detail" style="padding: 20px;border: 1px solid #ababab;border-radius: 5px; background-color:#F5FDFE;display:none;"> <label style="margin-bottom: 10px;font-size:18px;">No Related Internal Incident</label></div><div id="update-external-message" class="message-external" class="modal-body-detail" style="padding: 20px;border: 1px solid #ababab;border-radius: 5px; background-color:#F5FDFE; margin-top:20px;"> <label style="margin-bottom: 10px;font-size:18px;">External Message </label><label class="gswitch" id="switch-external" style="margin-top:-25px !important;"><input type="checkbox" id="external-message-switch"><span class="gslider round"></span></label><div class="modalOptions" style="clear: both; display: block;margin-bottom:30px;">Send alert to subscribers<label class="gswitch"><input type="checkbox" id="send-comment-notif"><span class="gslider round green"></span></label></div><textarea id="update-incident-body-external" placeholder="Message"></textarea> </div></div><div class="modal-footer"><button class="btn btn-primary" id="update-incident-status">UPDATE STATUS<span class="hide">'+t+'</span><span id="incident-title" style="display:none;">'+e+"</span></button></div></div></div>"),$("#update-internal-message .gswitch input, #update-external-message .gswitch input").prop("checked",!0),$("html").css("overflow","hidden"),$("#update-incident-modal").fadeIn("fast"),$("textarea#update-incident-body-internal").ckeditor(),$("textarea#update-incident-body-external").ckeditor(),$("#update-internal-message .gswitch input, #update-external-message .gswitch input").prop("checked")?$("#send-comment-notif").prop("checked",!0):$("#send-comment-notif").prop("checked",!1),$("#update-incident-modal").find("textarea").val(""),"block"==$(".incident-container").css("display")&&$("#related-incident").is(":visible")||$(".modal-content .modal-footer").prepend(d),$("#relatedIncidentAffected").is(":visible")||$(".components-affected-update").prepend(o),$("textarea#update-incident-body-internal").ckeditor(),CKEDITOR.instances["update-incident-body-internal"].on("instanceReady",function(e){setTimeout(function(){CKEDITOR.instances["update-incident-body-internal"].plugins.lite.findPlugin(CKEDITOR.instances["update-incident-body-internal"]).toggleTracking(!1,!1),$("#update-incident-message-modal").fadeIn("fast")},100)}),$("textarea#update-incident-body-external").ckeditor(),CKEDITOR.instances["update-incident-body-external"].on("instanceReady",function(e){setTimeout(function(){CKEDITOR.instances["update-incident-body-external"].plugins.lite.findPlugin(CKEDITOR.instances["update-incident-body-external"]).toggleTracking(!1,!1),$("#update-incident-message-modal").fadeIn("fast")},100)}),i==b&&($("#globalNoficationLabel").is(":visible")||$('<div id="globalNoficationLabel" ><label style="margin-bottom: 10px;font-size:18px;">Global Notifications </label><div class="modal-body-detail global-notifications" style="clear: both; display: block;margin-bottom:30px">Subscribe globalnotifications@sizmek.com.<label class="gswitch"><input type="checkbox" class="subscribe-global-notif"><span class="gslider round green"></span></label></div></div>').insertAfter(".modalOptions"),$(".modal-body-detail.global-notifications .gswitch input").prop("checked",!0),$("#updateMessage").css("background-color","#FFFDF6"),$(".modal-body-detail.global-notifications .gswitch input").prop("checked")?$(".subscribe-global-notif").prop("checked",!0):$(".subscribe-global-notif").prop("checked",!1)),$("#internal-message-switch").on("click",function(){$(this).is(":checked")?($("#update-internal-message #send-comment-notif,#update-internal-message  .subscribe-global-notif").prop("checked",!0),$("#update-internal-message > div").fadeIn()):($("#update-internal-message #send-comment-notif,#update-internal-message  .subscribe-global-notif").prop("checked",!1),$("#update-internal-message > div").fadeOut())}),$("#external-message-switch").click(function(){$(this).is(":checked")?($("#update-external-message #send-comment-notif,#update-external-message .subscribe-global-notif").prop("checked",!0),$("#update-external-message > div").fadeIn()):($("#update-external-message #send-comment-notif,#update-external-message .subscribe-global-notif").prop("checked",!1),$("#update-external-message > div").fadeOut())})}I=t,$.get("https://support.sizmek.com/api/v2/help_center/en-us/articles/"+t).done(function(e){e.article;for(var t=e.article.label_names,i=t.length,n=e.article.title,a=0;a<i;a++)if(t[a].includes("RelatedIncidents:"))var s=t[a].replace(/RelatedIncidents:/g,"").split(" ");if(s){s=s.filter(function(e){return""!==e}),d+='<div id="related-incidents-container"><label id="related-incidents-label">Related Incidents:</label>',o+='<div id="relatedIncidentAffected"><label>Related Incidents Affected</label><div class="component-container">';for(var l=0;l<s.length;l++)!function(t){$.get("/api/v2/help_center/articles/"+s[t]+".json").done(function(e){r.push(e.article),t+1===s.length&&function(){r.length===s.length?c():setTimeout(arguments.callee,100)}()})}(l)}else p(n);function c(){r.forEach(function(e){var t=e.section_id;S=360000037612===t?"MDX 2.0":202580163===t?"Sizmek Advertising Suite":360000037572===t?"DSP":360000041291===t?"DMP":201265859===t?"Internal":"",d+='<div class="incident-item-action" id="related-incident"><a class="incident-item-view" href="/hc/en-us/articles/'+e.id+'" id="related-incident-span">'+S+"</a><span>"+e.id+"</span></div>","Internal"!=S?o+='<div class="component"><input class="affected-component-'+t+'" type="checkbox" value="'+e.id+'" checked><span>'+S+'</span><span id="incident-title" style="display:none;">'+e.title+"</span></div>":I=e.id,M=e.title,1===r.length&&"Internal"==S&&(o="")}),1<r.length&&(o+="</div>"),d+="</div>",p(n)}})}),$(".incident-view-page").on("click","#update-incident-btn",function(e){"201265859"===$(".incident-nav-item.incident-nav-item-active span").text()?$("#updateMessage").css("background-color","#FFFDF6"):"201265859"===$("a.active span").text()&&$("#updateMessage").css("background-color","#FFFDF6")}),$(".incident-view-page, .incident-container").on("click","#update-maintenance-btn",function(e){var t=$(this).children(".hide").text(),i=$(this).children("#platform_id").text(),n=$(".incident-view-page .incident-list-item:last-child .incident-item-cont > span strong:first").text(),a=$(".incident-view-page .incident-list-item:last-child .incident-item-cont > span strong:nth-child(3)").text();n=n.replace("Maintenance Start: ","").split(" ",2),a=a.replace("Maintenance End: ","").split(" ",2);$("html").css("overflow","hidden"),$("body").append('<div class="modal" id="update-incident-modal"> <div class="modal-content"> <div class="modal-header"><button class="close close-modal">X</button><h1>Update Maintenance Status </h1></div> <div class="modal-body"> <div class="modal-body-detail"> <label>Maintenance Status </label> <div class="status-choices"> <input type="radio" id="mc1" name="status-choices" value="New"> <label class="radio-label" for="mc1">New </label> <input type="radio" id="mc2" name="status-choices" value="Updated"> <label class="radio-label" for="mc2">Updated </label> <input type="radio" id="mc3" name="status-choices" value="Completed"> <label class="radio-label" for="mc3">Completed </label> </div> </div> <div class="modal-body-detail"> <label>Message </label> <br> <textarea id="update-incident-body" placeholder="Message"> </textarea> </div> <div> <input type="checkbox" id="send-time"> <label for="send-time" style="font-weight: 400;font-size: 15px;">Update time. </label> </div> <div class="maintenance-start"> <label>Maintenance Start Time </label> <div class="maintenance-time"> <input disabled type="date" value="'+n[0]+'"> <select disabled class="time-select"></select> </div> <span class="info">All times must be specified in EST - Eastern Standard Time(US &amp; Canada) </span> </div> <div class="maintenance-end"> <label>Maintenance End Time </label> <div class="maintenance-time"> <input disabled value="'+a[0]+'" type="date"> <select disabled class="time-select"></select> </div> <span class="info">All times must be specified in EST - Eastern Standard Time(US &amp; Canada) </span> </div> <div class="modal-body-detail"> <label>Notifications </label> <br> <input type="checkbox" checked id="send-comment-notif"> <label for="send-comment-notif" style="font-weight: 400">Send alert to subscribers about this update. </label></div></div><div class="modal-footer"><button class="btn btn-primary" id="update-maintenance-status">UPDATE STATUS <span class="hide">'+t+" </span> </button></div></div></div>"),N(),$("textarea#update-incident-body").ckeditor(),CKEDITOR.instances["update-incident-body"].on("instanceReady",function(e){setTimeout(function(){CKEDITOR.instances["update-incident-body"].plugins.lite.findPlugin(CKEDITOR.instances["update-incident-body"]).toggleTracking(!1,!1),$("#update-incident-modal").find("textarea").val(""),$("#update-incident-modal").fadeIn("fast")},300)}),$("#update-incident-modal .maintenance-start .time-select").val(n[1]),$("#update-incident-modal .maintenance-end .time-select").val(a[1]),i==b&&$("#update-incident-modal .maintenance-end").after('<div class="modal-body-detail global-notifications"><label>Global Notifications</label><br><input type="checkbox" checked class="subscribe-global-notif" id="subsribe-global-notifications"><span class="checkbox-label">Subscribe globalnotifications@sizmek.com.</span></div>')}),$("body").on("change","#send-time",function(){$(this).is(":checked")?($("#update-incident-modal .maintenance-start input, #update-incident-modal .maintenance-start select").removeAttr("disabled"),$("#update-incident-modal .maintenance-end input, #update-incident-modal .maintenance-end select").removeAttr("disabled")):($("#update-incident-modal .maintenance-start input, #update-incident-modal .maintenance-start select").attr("disabled","disabled"),$("#update-incident-modal .maintenance-end input, #update-incident-modal .maintenance-end select").attr("disabled","disabled"))}),$("body").on("click","#create-new-platform",function(e){$(this).attr("disabled","disabled");var t=m.getItem("category"),i=$(".platform-name input").val(),n=$(".platform-display-name input").val(),a=$(".platform-user-segment select").val();if(""==a&&(a=null),""==i||""==n)return alert("Please fill up all the fields."),$(this).removeAttr("disabled"),!1;$.ajax({url:"/api/v2/help_center/categories/"+t+"/sections.json",type:"POST",data:{section:{locale:"en-us",name:i,description:n+" @component @status:1",user_segment_id:a}},success:function(){$("#create-platform-modal").remove(),B(t),$(this).removeAttr("disabled")}})}),$("body").on("click","#update-maintenance-status",function(){$(this).attr("disabled","disabled");var i=$(this).children(".hide").text(),e=$("#update-incident-body").val(),t=$("#send-comment-notif").is(":checked"),n=$(".status-choices input[name=status-choices]:checked").val();$.get("/api/v2/help_center/articles/"+i+"/labels.json").done(function(e){for(var t=0;t<e.labels.length;t++)if(-1<e.labels[t].name.indexOf("Status")){$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels/"+e.labels[t].id+".json",type:"DELETE"});break}$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels.json",type:"POST",data:{label:{name:"Status:"+n}}})}),$.ajax({url:"/api/v2/help_center/articles/"+i+"/comments.json",type:"POST",data:{comment:{body:n+" - "+e,author_id:f,locale:"en-us"},notify_subscribers:t}}).done(function(){$("#update-incident-modal").fadeOut(500),q(i)}),$("#subsribe-global-notifications").is(":checked")&&$.ajax({url:"/api/v2/help_center/sections/"+i+"/subscriptions.json",type:"POST",data:{subscription:{source_locale:"en-us",include_comments:!0,user_id:v}}})}),$("body").on("click","#update-incident-status",function(e){$(this).attr("disabled","disabled"),num_Incidents=0,incidentsUpdated=0,num_Incidents+=$(".modal-body").find('.components-affected-update input[type="checkbox"]:checked').length;var t=$(".modal-body"),m=$(this).find("span.hide").text();function i(i,e,t){var n=$("#update-incident-modal:visible .incident-severity select").val(),a=$(".status-choices input[name=status-choices]:checked").val(),s=$("#update-incident-body-external").val(),l=$('input[type="checkbox"]#send-comment-notif').is(":checked"),c=e;t&&(s=$("#update-incident-body-internal").val());var d=c.substr(c.indexOf("] ")+1);if($("#send-time").is(":visible")&&$("#send-time").is(":checked"))var o=$('#update-incident-modal .maintenance-start input[type="date"]').val()+" "+$("#update-incident-modal .maintenance-start select").val(),r=$('#update-incident-modal .maintenance-end input[type="date"]').val()+" "+$("#update-incident-modal .maintenance-end select").val(),p=a+" - <strong>Maintenance Start: "+o+"</strong><br><strong>Maintenance End: "+r+"</strong><br><br>"+s;else p=a+":<br><br>"+s;if(null==a)return alert("Please select status."),$(this).removeAttr("disabled"),!1;$("#update-incident-modal .global-notifications input.subscribe-global-notif").is(":checked")&&$.ajax({url:"/api/v2/help_center/sections/"+i+"/subscriptions.json",type:"POST",data:{subscription:{source_locale:"en-us",include_comments:!0,user_id:v}}}),$.ajax({url:"/api/v2/help_center/articles/"+i+"/translations/en-us.json",type:"PUT",data:{translation:{title:"["+a+"] "+d}}}),$.get("/api/v2/help_center/articles/"+i+"/labels.json").done(function(t){for(var e=0;e<t.labels.length;e++)!function(e){-1<t.labels[e].name.indexOf("Severity:")&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels/"+t.labels[e].id+".json",type:"DELETE"}).then(function(){$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels.json",type:"POST",data:{label:{name:"Severity:"+n}}})},function(){console.log("Error while Deleting Severity.")});-1<t.labels[e].name.indexOf("Status:")&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels/"+t.labels[e].id+".json",type:"DELETE"}).then(function(){$.ajax({url:"/api/v2/help_center/articles/"+i+"/labels.json",type:"POST",data:{label:{name:"Status:"+a}}})},function(){console.log("Error while Deleting Status.")});e+1===t.labels.length&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/comments.json",type:"POST",data:{comment:{body:p,author_id:f,locale:"en-us"},notify_subscribers:l}}).done(function(){if(incidentsUpdated++,incidentsUpdated===num_Incidents&&(q(m),$("#update-incident-modal").remove()),$(this).removeAttr("disabled"),$(".messageBoard .incident-view-page").is(":visible"))return!1;$("html").css("overflow","auto")})}(e)})}$("#internal-message-switch").is(":checked")&&(i(I,M,!0),num_Incidents++),$("#external-message-switch").is(":checked")&&t.find('.components-affected-update input[type="checkbox"]:checked').each(function(){i($(this).val(),$(this).parent().find("#incident-title").text(),!1)}),m!=I&&(i(m,$(this).find("#incident-title").text(),!1),num_Incidents++)}),$("#create-incident-template-btn").on("click",function(e){$(this).attr("disabled","disabled");var t=$("#new-incident-template-modal .template-name input").val(),i=$("#new-incident-template-modal .incident-status select").val(),n=$("#new-incident-template-modal .incident-severity select").val(),a=$("#new-incident-template-modal .incident-title input").val(),s=$("#new-incident-template-modal .incident-message textarea").val(),l="";if($("#new-incident-template-modal input.affected-component:checkbox:checked").each(function(){l=$(this).val()+","+l}),""==t||""==a)return alert("Please fill up all the fields."),$(this).removeAttr("disabled"),!1;if(""==l)return alert("Please select atleast one components."),$(this).removeAttr("disabled"),!1;var c=a+"::::"+i+"::::"+n+"::::"+s+"::::"+l;$.ajax({url:"/api/v2/help_center/sections/"+r+"/articles.json",type:"POST",data:{article:{title:"[Template]"+t,body:c,locale:"en-us",label_names:["Type:Template","For:Incident"],comments_disabled:!0},notify_subscribers:!1},success:function(){alert("Incident template saved."),$(".modal").fadeOut("fast"),$("#create-incident-template-btn").removeAttr("disabled"),setTimeout(function(){P()},2e3)}})}),$("#update-incident-template-btn").on("click",function(e){$(this).attr("disabled","disabled");var t=$(this).parent().parent().find("select.update-template-dropdown").val(),i=$("#new-incident-template-modal .template-name input").val(),n=$("#new-incident-template-modal .incident-status select").val(),a=$("#new-incident-template-modal .incident-severity select").val(),s=$("#new-incident-template-modal .incident-title input").val(),l=$("#new-incident-template-modal .incident-message textarea").val(),c="";if($("#new-incident-template-modal input.affected-component:checkbox:checked").each(function(){c=$(this).val()+","+c}),""==i||""==s)return alert("Please fill up all the fields."),$(this).removeAttr("disabled"),!1;if(""==c)return alert("Please select atleast one components."),$(this).removeAttr("disabled"),!1;var d=s+"::::"+n+"::::"+a+"::::"+l+"::::"+c;$.ajax({url:"/api/v2/help_center/articles/"+t+"/translations/en-us.json",type:"PUT",data:{translation:{title:"[Template]"+i,body:d}},success:function(){$(".modal").fadeOut("fast"),$("#update-incident-template-btn").removeAttr("disabled"),setTimeout(function(){P()},2e3)}})}),$("#create-maintenance-template-btn").on("click",function(e){$(this).attr("disabled","disabled");var t=$("#new-maintenance-template-modal .template-name input").val(),i=$("#new-maintenance-template-modal .maintenance-title input").val(),n=$("#new-maintenance-template-modal .maintenance-message textarea").val(),a="";if($("#new-maintenance-template-modal input.affected-component:checkbox:checked").each(function(){a=$(this).val()+","+a}),""==t||""==i)return alert("Please fill up all the fields."),$(this).removeAttr("disabled"),!1;if(""==a)return alert("Please select atleast one components."),$(this).removeAttr("disabled"),!1;var s=i+":::: :::: ::::"+n+"::::"+a;$.ajax({url:"/api/v2/help_center/sections/"+r+"/articles.json",type:"POST",data:{article:{title:"[Template]"+t,body:s,locale:"en-us",label_names:["Type:Template","For:Maintenance"],comments_disabled:!0},notify_subscribers:!1},success:function(){alert("Maintenance template saved."),$(".modal").fadeOut("fast"),$("#create-maintenance-template-btn").removeAttr("disabled"),setTimeout(function(){P()},2e3)}})}),$("#update-maintenance-template-btn").on("click",function(e){$(this).attr("disabled","disabled");var t=$(this).parent().parent().find("select.update-template-dropdown").val(),i=$("#new-maintenance-template-modal .template-name input").val(),n=$("#new-maintenance-template-modal .maintenance-title input").val(),a=$("#new-maintenance-template-modal .maintenance-message textarea").val(),s="";if($("#new-maintenance-template-modal input.affected-component:checkbox:checked").each(function(){s=$(this).val()+","+s}),""==i||""==n)return alert("Please fill up all the fields."),$(this).removeAttr("disabled"),!1;if(""==s)return alert("Please select atleast one components."),$(this).removeAttr("disabled"),!1;var l=n+":::: :::: ::::"+a+"::::"+s;$.ajax({url:"/api/v2/help_center/articles/"+t+"/translations/en-us.json",type:"PUT",data:{translation:{title:"[Template]"+i,body:l}},success:function(){$(".modal").fadeOut("fast"),$("#update-maintenance-template-btn").removeAttr("disabled"),setTimeout(function(){P()},2e3)}})}),$(".platform-list-cont").on("click",".platform-item-open",function(){var e=$(this).closest(".incident-list-item").find(".incident-item-body h5").text();if(confirm($(this).text()+" "+e+" platform?")){var t=$(this).closest("div").children("span").text(),i=$(this).closest("div").find("select").first().val(),n=$(this).closest(".incident-list-item").find(".incident-item-body span").text();if("Hide Content"==$(this).closest(".incident-list-item").find(".platform-open-content").text())var a="@show_content ";else a="";if("Enable"==$(this).text())var s=e+n+a+"@component @status:"+i,l="Disable",c="activated";else s=e+n+a+"@status:"+i,l="Enable",c="activate";$.ajax({url:"/api/v2/help_center/sections/"+t+".json",type:"PUT",data:{section:{description:s}}}),$(this).html(l).prop("title",l+" Platform").removeAttr("class").addClass("platform-item-open").addClass(c),w=!0}}),$(".platform-list-cont").on("click",".platform-open-content",function(){var e=$(this).closest(".incident-list-item").find(".incident-item-body h5").text();if(confirm($(this).text()+" of "+e+"?")){var t=$(this).closest("div").children("span").text(),i=$(this).closest("div").find("select").first().val(),n=$(this).closest(".incident-list-item").find(".incident-item-body span").text();if("Disable"==$(this).closest(".incident-list-item").find(".platform-item-open").text())var a="@component ";else a="";if("Show Content"==$(this).text())var s=e+n+a+"@show_content @status:"+i,l="Hide Content",c="activated";else s=e+n+a+"@status:"+i,l="Show Content",c="activate";$.ajax({url:"/api/v2/help_center/sections/"+t+".json",type:"PUT",data:{section:{description:s}}}),$(this).html(l).prop("title",l).removeAttr("class").addClass("platform-open-content").addClass(c),w=!0}}),$(".platform-list-cont").on("click",".platform-item-delete",function(){var e=$(this).closest(".incident-list-item").find(".incident-item-body h5").text();if(confirm("Delete "+e+" platform?")){$(this).css("cursor","progress");var t=$(this).closest("div").children("span").text();$.ajax({url:"/api/v2/help_center/sections/"+t+".json",type:"DELETE"}),$(this).closest(".incident-list-item").remove(),w=!0}}),$(".platform-list-cont").on("change","select.plat-segment",function(){var e=$(this).closest("div").children("span").text(),t=$(this).val();$.ajax({url:"/api/v2/help_center/sections/"+e+".json",type:"PUT",data:{section:{user_segment_id:t}}}),w=!0}),$(".platform-list-cont").on("change","select.plat-status",function(){var e=$(this).closest(".incident-list-item").find(".incident-item-body h5").text(),t=$(this).closest(".incident-list-item").find(".incident-item-body span").text(),i=$(this).closest("div").children("span").text(),n=$(this).val();if("Hide Content"==$(this).closest(".incident-list-item").find(".platform-open-content").text())var a="@show_content ";else a="";if("Disable"==$(this).closest(".incident-list-item").find(".platform-item-open").text())var s="@component ";else s="";var l=e+t+s+a+"@status:"+n;$.ajax({url:"/api/v2/help_center/sections/"+i+".json",type:"PUT",data:{section:{description:l}}}),$(this).css("background","linear-gradient(to right, #fff 88%,"+E[n-1]),w=!0}),$(".incident-view-page").on("click",".edit_body a",function(){var e=$(this).closest(".incident-list-item").find(".incident-item-cont > span strong:first").text(),t=$(this).closest(".incident-list-item").find(".incident-item-cont > span strong:nth-child(3)").text();if(""!=e&&""!=t)var i=(i=$(this).closest(".incident-list-item").find(".incident-item-cont span.hide").html().replace(e,"").replace(t,"")).substr(i.indexOf("<br><br>")+8),n=(e=e.replace("Maintenance Start: ","").split(" ",2),t=t.replace("Maintenance End: ","").split(" ",2),'<div class="maintenance-start"> <label>Maintenance Start Time </label> <div class="maintenance-time"> <input type="date" value="'+e[0]+'"> <select class="time-select"></select> </div> <span class="info">All times must be specified in EST - Eastern Standard Time(US &amp; Canada) </span> </div> <div class="maintenance-end"> <label>Maintenance End Time </label> <div class="maintenance-time"> <input value="'+t[0]+'" type="date"> <select class="time-select"></select> </div> <span class="info">All times must be specified in EST - Eastern Standard Time(US &amp; Canada) </span> </div>');else i=$(this).closest(".incident-list-item").children(".incident-item-cont").children("span.hide").html(),n="";$("body").append('<div class="modal" id="update-incident-message-modal"><div class="modal-content"><div class="modal-header"><button class="close close-modal">X</button><h1>Edit Message</h1></div> <div class="modal-body">'+n+'<div class="modal-body-detail"> <label>Message </label> <br> <textarea id="update-incident-body" placeholder="Message">'+i+'</textarea> </div></div><div class="modal-footer"><button class="btn btn-primary" id="update-body-message">UPDATE MESSAGE</button></div></div></div>'),$("textarea#update-incident-body").ckeditor(),CKEDITOR.instances["update-incident-body"].on("instanceReady",function(e){setTimeout(function(){CKEDITOR.instances["update-incident-body"].plugins.lite.findPlugin(CKEDITOR.instances["update-incident-body"]).toggleTracking(!1,!1),$("#update-incident-message-modal").fadeIn("fast")},300)}),N(),$("html").css("overflow","hidden"),$("#update-incident-message-modal .maintenance-start .time-select").val(e[1]),$("#update-incident-message-modal .maintenance-end .time-select").val(t[1])}),$(".incident-view-page").on("click",".edit_update a",function(){var e=$(this).closest(".incident-list-item").find(".incident-item-cont > span strong:first").text(),t=$(this).closest(".incident-list-item").find(".incident-item-cont > span strong:nth-child(3)").text(),i=$(this).children("span.hide").text(),n=$(this).closest(".incident-list-item").children(".incident-item-body").text();if(""!=e&&""!=t)var a=(a=$(this).closest(".incident-list-item").find(".incident-item-cont span.hide").html().replace(e,"").replace(t,"")).substr(a.indexOf("<br><br>")+8),s=(e=e.replace("Maintenance Start: ","").split(" ",2),t=t.replace("Maintenance End: ","").split(" ",2),'<div class="maintenance-start"> <label>Maintenance Start Time </label> <div class="maintenance-time"> <input type="date" value="'+e[0]+'"> <select class="time-select"></select> </div> <span class="info">All times must be specified in EST - Eastern Standard Time(US &amp; Canada) </span> </div> <div class="maintenance-end"> <label>Maintenance End Time </label> <div class="maintenance-time"> <input value="'+t[0]+'" type="date"><select class="time-select"></select> </div> <span class="info">All times must be specified in EST - Eastern Standard Time(US &amp; Canada) </span> </div>');else a=$(this).closest(".incident-list-item").children(".incident-item-cont").children("span.span-body").html(),s="";$("body").append('<div class="modal" id="update-incident-message-modal"><div class="modal-content"><div class="modal-header"><button class="close close-modal">X</button><h1>Edit Message</h1></div> <div class="modal-body">'+s+'<div class="modal-body-detail"> <label>Message </label> <br> <textarea id="update-incident-body" placeholder="Message">'+a+'</textarea> </div></div><div class="modal-footer"><button class="btn btn-primary" id="update-update-message">UPDATE MESSAGE<span class="hide span-update_id">'+i+'</span><span class="hide span-update_status">'+n+"</span></button></div></div></div>"),$("textarea#update-incident-body").ckeditor(),CKEDITOR.instances["update-incident-body"].on("instanceReady",function(e){setTimeout(function(){CKEDITOR.instances["update-incident-body"].plugins.lite.findPlugin(CKEDITOR.instances["update-incident-body"]).toggleTracking(!1,!1),$("#update-incident-message-modal").fadeIn("fast")},300)}),N(),$("html").css("overflow","hidden"),$("#update-incident-message-modal .maintenance-start .time-select").val(e[1]),$("#update-incident-message-modal .maintenance-end .time-select").val(t[1])}),$("body").on("click","#update-incident-message-modal #update-body-message",function(){$(this).attr("disabled","disabled");var e=$(".incident-nav-header").children("span.hide").text();if($("#update-incident-message-modal .maintenance-start").is(":visible"))var t="<strong>Maintenance Start: "+($('#update-incident-message-modal .maintenance-start input[type="date"]').val()+" "+$("#update-incident-message-modal .maintenance-start select").val())+"</strong><br><strong>Maintenance End: "+($('#update-incident-message-modal .maintenance-end input[type="date"]').val()+" "+$("#update-incident-message-modal .maintenance-end select").val())+"</strong><br><br>"+$("#update-incident-message-modal #update-incident-body").val();else t=$("#update-incident-message-modal #update-incident-body").val();$.ajax({url:"/api/v2/help_center/articles/"+e+"/translations/en-us.json",type:"PUT",data:{translation:{body:t}},success:function(){$("#update-incident-message-modal").remove(),q(e)}})}),$("body").on("click","#update-incident-message-modal #update-update-message",function(){$(this).attr("disabled","disabled");var e=$(this).children("span.span-update_id").text(),t=$(this).children("span.span-update_status").text(),i=$(".incident-nav-header").children("span.hide").text();if($("#update-incident-message-modal .maintenance-start").is(":visible"))var n="<strong>Maintenance Start: "+($('#update-incident-message-modal .maintenance-start input[type="date"]').val()+" "+$("#update-incident-message-modal .maintenance-start select").val())+"</strong><br><strong>Maintenance End: "+($('#update-incident-message-modal .maintenance-end input[type="date"]').val()+" "+$("#update-incident-message-modal .maintenance-end select").val())+"</strong><br><br>"+$("#update-incident-message-modal #update-incident-body").val();else n=$("#update-incident-message-modal #update-incident-body").val();$.ajax({url:"/api/v2/help_center/articles/"+i+"/comments/"+e+".json",type:"PUT",data:{comment:{body:t+" - "+n}},success:function(){$("#update-incident-message-modal").remove(),q(i)}})}),$("body").on("click",".delComment a",function(){var e=confirm("Delete comment?"),t=$(this).children("span.hide").text(),i=$(".incident-nav-header").children("span.hide").text();1==e&&$.ajax({url:"/api/v2/help_center/articles/"+i+"/comments/"+t+".json",type:"DELETE",success:function(){location.reload()}})}),$("body").on("click","#update-incident-modal .close-modal, #create-platform-modal .close-modal, #update-incident-message-modal .close-modal, #add-subscriber-report .close-modal",function(e){if($(".modal-footer #related-incidents-container").remove(),$(this).closest(".modal").remove(),$(".messageBoard .incident-view-page").is(":visible")||$(".messageBoard .platform-container").is(":visible")||$(".messageBoard .subs-container").is(":visible"))return!1;$("html").css("overflow","auto")}),$(".close-modal").click(function(){$(".modal-footer #related-incidents-container").remove(),$(this).closest(".modal").fadeOut("fast")}),$("#new-incident-template").on("click",function(){R(),$("#new-incident-template-modal").fadeIn("fast")}),$("#new-maintenance-template").on("click",function(){R(),$("#new-maintenance-template-modal").fadeIn("fast")}),$(".incident-nav-search").on("keydown",function(){var e=$(".incident-nav-search").val();$(".incident-lists-item:visible").hide(),$('.incident-lists-item div:contains("'+e+'")').show()});var L={startPos:function(e,t){return e*t},getPage:function(e,t,i){var n=[];e=e.slice(t,e.length);for(var a=0;a<i;a++)n.push(e[a]);return n},totalPages:function(e,t){return Math.ceil(e.length/t)},createBtns:function(e,t){var i=$('<div class="pagination" />');i.append('<span class="pagination-button">&laquo;</span>');for(var n=1;n<=e;n++){if(5<e&&t!==n)if(1===t||2===t){if(5<n)continue}else if(t===e||t===e-1){if(n<e-4)continue}else if(n<t-2||t+2<n)continue;var a=$('<span class="pagination-button page-num" />');n==t&&a.addClass("active"),a.text(n),i.append(a)}return i.append($('<span class="pagination-button">&raquo;</span>')),i},createPage:function(e,t,i){$(".pagination").remove();var n=e.parent(),a=(e=e.detach().toArray(),this.startPos(t-1,i)),s=this.getPage(e,a,i);$.each(s,function(){void 0===this.window&&n.append($(this))});var l=this.totalPages(e,i),c=this.createBtns(l,t);n.after(c)}};function B(e){$(".platform-list-cont").html(""),$.get("/api/v2/help_center/categories/"+e+"/sections.json",function(e){for(var t=1,i=0;i<e.count;i++){for(var n=name=temp="",a=e.sections[i].description,s=a.split("@"),l=0;l<s.length;l++)-1<s[l].indexOf("status")?n=s[l].replace(/\s/g,"").replace("status:",""):-1<s[l].indexOf("mdxnxt")||-1<s[l].indexOf("mdx2")||-1<s[l].indexOf("supportkb")||-1<s[l].indexOf("strikead")?temp=temp+"@"+s[l]:-1==s[l].indexOf("component")&&-1==s[l].indexOf("show_content")&&(name=s[l]);if(-1<a.indexOf("@component"))var c="Disable",d="activated";else c="Enable",d="activate";if(-1<a.indexOf("@show_content"))var o="Hide Content",r="activated";else o="Show Content",r="activate";var p=e.sections[i].id,m=e.sections[i].user_segment_id;$(".platform-list-cont").append('<div class="incident-list-item"> <div class="incident-item-body"><h5>'+name+'</h5><span class="hide">'+temp+'</span></div> <div class="incident-item-action"><select class="select-picker plat-status" title="Platform Status"><option value="1">Operational</option><option value="2">Under Maintenance</option><option value="3">Degraded Performance</option><option value="4">Partial Outage</option><option value="5">Major Outage</option></select><select class="select-picker plat-segment" title="User Segment"><option value="">Visible to everyone </option><option value="526223">Signed-in users </option><option value="526203">Agents and managers </option></select><a title="'+c+' Platform" class="platform-item-open '+d+'">'+c+'</a><a title="'+o+'" class="platform-open-content '+r+'">'+o+'</a><a title="Delete Platform" class="platform-item-delete">Delete</a><span>'+p+"</span> </div></div>")&&($(".platform-list-cont .incident-list-item:nth-child("+t+") select.plat-segment").val(m),$(".platform-list-cont .incident-list-item:nth-child("+t+") select.plat-status").val(n)),t++}$(".plat-status:visible").each(function(){$(this).hide().addClass("k-selected").removeClass("select-picker");var n=$(this).val();$(this).before('<div class="k-select" tabindex="-1"><span></span><ul></ul></div>'),$(this).find("option").each(function(e){var t=$(this).html(),i=$(this).val();n==i?($(this).parent().prev(".k-select").find("span").first().html('<i class="fa fa-circle" style="color:'+E[e]+'"></i>'+t),$(this).parent().prev(".k-select").find("ul").append('<li style="display:none"><i class="fa fa-circle" style="color:'+E[e]+'"></i>'+t+"<span>"+i+"</span></li>")):$(this).parent().prev(".k-select").find("ul").append('<li><i class="fa fa-circle" style="color:'+E[e]+'"></i>'+t+"<span>"+i+"</span></li>")})}),J()})}function K(e){""!=e&&(0==$("#add-subscriber-report").length?($(".message-board-container").append('<div class="modal" id="add-subscriber-report"><div class="modal-content" style="max-width:500px"><div class="modal-header"><button class="close close-modal">X</button><h1 style="font-size:17px">Invalid User Email</h1></div><div class="modal-body"><div class="modal-body-detail">'+e+'</div></div><div class="modal-footer"></div></div></div>'),$("#add-subscriber-report").fadeIn("fast")):($("#add-subscriber-report .modal-body-detail").append(", "+e),$("#add-subscriber-report .modal-header h1").html("Invalid User Emails")))}function G(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{2,3}\.[0-9]{1,3}\.[0-9]{2,3}\.[0-9]{2,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e)}function X(e,t,i,n){$.get("/api/v2/users/show_many.json?ids="+e,function(e){e=e.users[0].email;$("#subs-"+n+" .subs-lists").append('<div class="subs-lists-item"><input type="checkbox" value="'+t+'"><div>'+e+"</div><div>"+i.toDateString()+" "+i.toLocaleTimeString()+'</div><div><a class="subs-item-delete">Remove</a><span>'+t+"</span></div></div>")})}function Q(l){$.get("/api/v2/help_center/en-us/sections/"+l+"/subscriptions.json",function(e){for(var t=e.subscriptions.length,i=(new Date).getMonth(),n=0,a=0;a<t;a++){var s=e.subscriptions[a].created_at;i==new Date(s).getMonth()&&n++}$("#subs-"+l+" .subs-list-desc").html("Total "+t+" email subscribers, "+n+" added this month.")})}function V(t,i){$(".subs-lists-item:visible input:checkbox:checked").each(function(){var e=$(this).closest("div").find("span").text();e!=i&&($.ajax({url:"/api/v2/help_center/sections/"+t+"/subscriptions/"+e+".json",type:"DELETE"}),$(this).closest(".subs-lists-item").remove())}),setTimeout(function(){Q(t),$("#subs-"+t+" .checked-email-subscribers").remove()},1e3)}$.fn.paginate=function(a){var s=$(this);if((isNaN(a)||void 0===a)&&(a=5),s.length<=a)return!0;s.length!==s.parent()[0].children.length&&s.wrapAll('<div class="pagination-items" />'),L.createPage(s,1,a),$(document).on("click",".pagination-button",function(e){var t=parseInt($(".pagination-button.active").text(),10),i=L.totalPages(s,a),n=$(e.target);t=parseInt(n.text(),10),"«"==n.text()&&(t=1),"»"==n.text()&&(t=i),0<t&&t<=i&&(L.createPage(s,t,a),$(window).scrollTop()),$(".message-board-container").scrollTop(0)})},$(".subs-nav-cont").on("click",".subs-nav-item:not(:last-child)",function(e){var o,t=$(this).children("span").text();o=t,$(".subs-list-cont").hide(),$("#subs-"+o).show(),""==$("#subs-"+o+" .subs-lists").html()&&$.get("/api/v2/help_center/en-us/sections/"+o+"/subscriptions.json",function(e){for(var t=e.subscriptions.length,i=(new Date).getMonth(),n=0,a=0;a<t;a++){var s=e.subscriptions[a].user_id,l=e.subscriptions[a].id,c=e.subscriptions[a].created_at,d=new Date(c);X(s,l,d,o),i==d.getMonth()&&n++}$("#subs-"+o+" .subs-list-desc").html("Total "+t+" email subscribers, "+n+" added this month.")}),$(".subs-nav-item").removeClass("subs-nav-item-active"),$(this).addClass("subs-nav-item-active")}),$("#goto-subscribers").on("click",function(){$("main.messageBoard").children("div").not(".container-divider").hide(),$(".subs-container").show(),$(".subs-nav-item").first().click()}),$("#hide_subscribers").on("click",function(){$(".subs-container").hide(),$(".container").show()}),$(".subs-container").on("click",".subs-item-delete",function(e){if(confirm("Remove this subscription?")){var t=$(".subs-nav-item-active span").text(),i=$(this).closest("div").find("span").text();$.ajax({url:"/api/v2/help_center/sections/"+t+"/subscriptions/"+i+".json",type:"DELETE"}),V(t,i),$(this).closest(".subs-lists-item").remove()}}),$(".subs-container").on("click",".checked-email-subscribers",function(e){confirm("Remove checked subscriptions?")&&V($(".subs-nav-item-active span").text(),-1)}),$(".subs-container").on("change",".subs-list-header input:checkbox",function(e){this.checked?$(".subs-lists-item:visible input:checkbox").click():$(".subs-lists-item:visible input:checkbox").removeAttr("checked").trigger("change")}),$(".subs-container").on("change",".subs-lists .subs-lists-item:visible input:checkbox",function(e){var t=$(".subs-nav-item-active span").text();if(0<$("#subs-"+t+" .subs-lists-item input:checked").length){if($(".checked-email-subscribers").is(":visible"))return!1;$("#subs-"+t).prepend('<a class="checked-email-subscribers incident-subscribe-button incident-save-button" style="position: absolute;padding: 5px 8px;margin-top:-30px">Remove selected</a>')}else $("#subs-"+t+" .checked-email-subscribers").remove()}),$("#subs-item-add").on("click",function(){var e=$("#subs-add-email").val().replace(/\s/g,"").split(","),a=0;function l(){var n;a<e.length?G(e[a])?(n=e[a],$.get("/api/v2/users/search.json?query="+n,function(e){if(0<e.users.length){var t=e.users[0].id;i=t,s=$(".subs-nav-item-active span").text(),$.ajax({url:"/api/v2/help_center/sections/"+s+"/subscriptions.json",type:"POST",data:{subscription:{source_locale:"en-us",include_comments:!0,user_id:i}},success:function(e){Q(s);var t=e.subscription.user_id,i=e.subscription.id,n=e.subscription.created_at,a=new Date(n);X(t,i,a,s)}}),$('input[type="email"]#subs-add-email').css("width","220px")}else K(n);var i,s;a++,l()})):(K(e[a]),a++,l()):$("#subs-add-email").val("")}l()}),$('input[type="email"]#subs-add-email').on("keyup",function(e){var t=$(this).val().replace(/\s/g,"");if(8!=e.keyCode){var i=t.split(","),n=i.length;G(i[n-1])&&$(this).val(t.replace(/\,/g,", ")+","),1<n&&$(this).css("width","60%")}""==t&&$(this).css("width","220px")}),$(".subs-nav-search").on("keydown",function(){var e=$(".subs-nav-search").val();$(".subs-lists-item:visible").hide(),$('.subs-lists-item div:contains("'+e+'")').show()})}else $(".create-incident-modal-btn,.create-maintenance-modal-btn").remove();function q(y){var x="";if($(".incident-container").is(":visible")||$(".messageBoard .incident-view-page").is(":visible"))var w=".messageBoard ",k="related-incident-view";else w="main:not(.messageBoard) ",k="related-articles-view";$.get("/api/v2/help_center/en-us/articles/"+y).done(function(e){for(var t=e.article,i=e.article.label_names,n=i.length,a=0;a<n;a++)if(i[a].includes("Type:"))var o=i[a].replace("Type:","");else if(i[a].includes("Status:"))x=i[a].replace("Status:","");else if(i[a].includes("Severity:"))var s=i[a].replace("Severity:","");else if(i[a].includes("RelatedIncidents:"))var l=i[a].replace(/RelatedIncidents:/g,"").split(" ");var r=x,p=t.section_id,m=t.title,c=t.created_at,u=new Date(c),b=t.body,d=[];if(void 0!==l)if((l=l.filter(function(e){return""!=e})).length)for(var v='<div id="related-incidents-container" class="'+k+'"><label id="related-incidents-label">Related Incidents:</label>',h=0;h<l.length;h++)!function(t){$.get("/api/v2/help_center/articles/"+l[t]+".json").done(function(e){d.push(e.article),t+1===l.length&&function(){l.length===d.length?f():setTimeout(arguments.callee,100)}()})}(h);else g();else g();function f(){d.forEach(function(e){360000037612===e.section_id?S="MDX 2.0":202580163===e.section_id?S="Sizmek Advertising Suite":360000037572===e.section_id?S="DSP":360000041291===e.section_id?S="DMP":201265859===e.section_id&&(S="Internal"),v+='<div class="incident-item-action" id="related-incident"><a class="incident-item-view" href="/hc/en-us/articles/'+e.id+'">'+S+"</a><span>"+e.id+"</span></div>"}),g()}function g(){if("Incident"==o)var e="update-incident-btn";else e="update-maintenance-btn";function c(e){var t=e.indexOf(":"),i=e.indexOf("-");return-1<t?-1<i?t<i?":":" -":":":" -"}function d(e){var t=e.indexOf(":"),i=e.indexOf("-");return-1<t?-1<i?t<i?":<br><br>":"- ":":<br><br>":"- "}"["===m[0]&&(m=m.slice(m.indexOf("]")+1,m.length)),$(w+".incident-view-page").html('<div class="incident-container-show"><div class="incident-navigation"> <div class="incident-nav-header"><div class="incident-header-title" id="incident-title-'+s+'">'+D(x.toUpperCase())+m+'</div><span class="hide">'+y+'</span></div><h3 class="sub-header">Previous Updates</h3></div> <div class="incident-list-cont show"> <div class="incident-list"><div class="incident-list-item"><div class="incident-item-body"><h5>Investigating</h5></div><div class="incident-item-cont">'+b+'<br><small class="small">Posted on '+u.toDateString()+" "+u.toLocaleTimeString()+'</small><span class="hide">'+b+'<span></div><div class="edit_body"><a>Edit</a></div></div></div><a id="back-incident-list" class="plain-button"><br><span style="font-family:arial">←</span> Incidents</a></div></div>'),s?$(w+".incident-container-show .incident-header-title").css("color",E[s-1]):"Maintenance"==o&&$(w+".incident-container-show .incident-header-title").css("color","rgb(52, 152, 219)"),$(w+".incident-container-show .incident-header-title").css("font-size","28px"),-1<jQuery.inArray("view_support_content",HelpCenter.user.tags)&&null!=o&&setTimeout(function(){null==v&&(v=""),$(w+".incident-view-page .incident-list-cont").append('<a id="delete-incident-btn" class="incident-subscribe-button incident-delete-button">DELETE<span class="hide">'+y+"</span></a><a id="+e+' class="incident-subscribe-button incident-update-button">Update<span class="hide">'+y+'</span><span style="display:none" id="platform_id">'+p+"</span></a>"+v)},200),$.get("/api/v2/help_center/articles/"+y+"/comments.json").done(function(e){for(var t=e.count-1;0<=t;t--){var i=e.comments[t].id,n=e.comments[t].updated_at,a=new Date(n),s=(l=e.comments[t].body).split(c(l),1),l=l.substr(l.indexOf(d(l))+1);$(w+".incident-view-page .incident-list").prepend('<div class="incident-list-item"><div class="incident-item-body"><h5>'+s+'</h5></div><div class="incident-item-cont">'+l+'<br><small class="small">Posted on '+a.toDateString()+" "+a.toLocaleTimeString()+'</small><span class="hide span-body">'+l+'</span></div><div class="edit_update"><a>Edit<span class="hide">'+i+'</span></a></div><div class="delComment"><a>Delete<span class="hide">'+i+"</span></a></div></div>")}$(w+".incident-item-action a, .article-list a").css("cursor","pointer"),$(w+".incident-container, "+w+".section-tree, "+w+".article-list, "+w+".main-components-container, .pagination ul").hide(),$(w+".incident-view-page").fadeIn(),$(window).scrollTop(0),-1!=jQuery.inArray("view_support_content",HelpCenter.user.tags)&&null!=o||$(".edit_update, .edit_body, .delComment").remove(),null==r&&$(".incident-item-body").remove(),$(".incident-item-cont table:not([class*='msgboard'])").addClass("msgboard")})}})}function W(){var s=JSON.parse(m.getItem("platforms"));if("agent"==p||"manager"==p)$.get("/api/v2/users/search.json?query="+HelpCenter.user.email,function(e){for(var t=e.users[0].id,a=1,i=1;i<=a;i++)$.get("/api/v2/help_center/users/"+t+"/subscriptions.json?page="+i,function(e){for(var t=0;t<e.subscriptions.length;t++){a=e.page_count;var i=e.subscriptions[t].content_type,n=e.subscriptions[t].content_id.toString();"Section"==i&&-1<jQuery.inArray(n,s)&&($("#component-"+n).append('<span class="subs-id" style="display:none">'+e.subscriptions[t].id+"</span>"),$("#component-"+n+" .article-subscribe").html("Unfollow").addClass("article-unsubscribe").removeClass("article-subscribe"))}$(".component-loader").hide(),$(".main-components-container").css("opacity","1")})});else if("end_user"==p)for(var e=0;e<s.length;e++)$.get("/api/v2/help_center/en-us/sections/"+s[e]+"/subscriptions.json",function(e){0<e.subscriptions.length&&($("#component-"+e.subscriptions[0].content_id).append('<span class="subs-id" style="display:none">'+e.subscriptions[0].id+"</span>"),$("#component-"+e.subscriptions[0].content_id+" .article-subscribe").html("Unfollow").addClass("article-unsubscribe").removeClass("article-subscribe")),$(".component-loader").hide(),$(".main-components-container").css("opacity","1")})}$(".article-list > li > a").on("contextmenu",function(e){return!1}),$("body").on("click",".article-list > li > a",function(e){e.preventDefault(),$(this).css("cursor","progress");var t=$(this).attr("href").split("/");q(t[t.length-1].split("-",1))}),$("body").on("click",".treeline a",function(e){e.preventDefault(),$(this).css("cursor","progress");var t=$(this).attr("href").split("/");q(t[t.length-1].split("-",1))}),$(".incident-view-page").on("click","#back-incident-list",function(){$(".messageBoard .incident-view-page").is(":visible")?($(".incident-view-page").hide().html(""),$(".incident-container").show()):($(".incident-view-page").hide().html(""),"support_kb"==$("#switchTag").val()&&-1==window.location.href.indexOf("/categories/"+u)?$(".section-tree, .article-list#show-data, .main-components-container").show():$(".section-tree, .article-list:not(#show-data), .main-components-container, .pagination ul").show()),$(window).scrollTop(0)}),$("body").on("click",".component .article-subscribe",function(){if("Follow"==$(this).text()){$(this).css("cursor","progress");var e=$(this).parent().find("span.hide").text(),t=$(this);$.ajax({url:"/api/v2/help_center/sections/"+e+"/subscriptions.json",type:"POST",data:{subscription:{source_locale:"en-us",include_comments:!0}},success:function(e){t.parent().append('<span class="subs-id" style="display:none">'+e.subscription.id+"</span>"),t.html("Unfollow").addClass("article-unsubscribe").removeClass("article-subscribe"),t.css("cursor","pointer")}})}}),$("body").on("click",".component .article-unsubscribe",function(){var e=$(this).parent().find("span.hide").text(),t=$(this).parent().find("span.subs-id").text(),i=$(this);$.ajax({url:"/api/v2/help_center/sections/"+e+"/subscriptions/"+t+".json",type:"DELETE"}),i.parent().find("span.subs-id").remove(),i.html("Follow").addClass("article-subscribe").removeClass("article-unsubscribe")})}function J(){$(".select-picker").each(function(){$(this).prev(".k-select").remove(),$(this).hide().addClass("k-selected").removeClass("select-picker");var i=$(this).val();$(this).before('<div class="k-select" tabindex="-1"><span></span><ul></ul></div>'),$(this).find("option").each(function(){var e=$(this).text(),t=$(this).val();i==t?($(this).parent().prev(".k-select").find("span").first().html(e),$(this).parent().prev(".k-select").find("ul").append('<li style="display:none">'+e+"<span>"+t+"</span></li>")):$(this).parent().prev(".k-select").find("ul").append("<li>"+e+"<span>"+t+"</span></li>")})})}function Z(e,t){if(void 0!==history.pushState){var i={Page:e,Url:t};history.pushState(i,i.Page,i.Url)}else window.location.replace("https://support.sizmek.com/hc/en-us/articles/360003514372")}setTimeout(function(){"1px"===$("#navbar-container").css("height")?$(".message-board-container, .side-modal").css("top","1px"):$(".message-board-container, .side-modal").css("top","49px"),$("zd-hc-resizer").on("click",function(){$(this).data("clicked",!0);var e=$("#navbar-container").css("height");$("zd-hc-resizer").data("clicked")&&("1px"===e?$(".message-board-container, .side-modal").css("top","49px"):$(".message-board-container, .side-modal").css("top","1px"))})},2e3),setTimeout(function(){$(".article-list a").on("click",function(){var e=$(this).attr("href"),t=window.location.href;"https://support.sizmek.com/hc/en-us/categories/201680143"===t?Z(e,t.replace("categories/201680143","articles/")+e):"https://support.sizmek.com/hc/en-us/categories/201680143-Message-Board"===t?Z(e,t.replace("categories/201680143-Message-Board","articles/")+e):console.log("Incorrect URL address!"),$(this).addClass("active")})},1e3),$(".incident-view-page").on("click","#back-incident-list",function(){switch(window.location.href){case"https://support.sizmek.com/hc/en-us/categories/201680143":case"https://support.sizmek.com/hc/en-us/categories/201680143-Message-Board":case"https://support.sizmek.com/hc/en-us/sections/360000037612-Sizmek-MDX2-0-Message-Board":case"https://support.sizmek.com/hc/en-us/sections/202580163-Sizmek-Advertising-Suite-Message-Board":case"https://support.sizmek.com/hc/en-us/sections/360000037572-Sizmek-DSP-Message-Board":case"https://support.sizmek.com/hc/en-us/sections/360000041291-Sizmek-DMP-Message-Board":case"https://support.sizmek.com/hc/en-us/sections/201265859-Internal":break;default:history.back()}$(".article-list a").removeClass("active")})});